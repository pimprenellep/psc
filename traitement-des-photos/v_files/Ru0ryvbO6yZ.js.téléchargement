if (self.CavalryLogger) { CavalryLogger.start_js(["ToH3b"]); }

__d("EventPlanExperiment",["EventRemindersGating","QE2Logger"],(function(a,b,c,d,e,f){"use strict";var g="event_plan_entry_point_nux";a={shouldShowEntryPointNuxWithExposure:function(){b("QE2Logger").logExposureForUser(g);return b("EventRemindersGating").shouldShowEntryPointNux}};e.exports=a}),null);
__d("ChatAnimatedGifs",["URI"],(function(a,b,c,d,e,f){__p&&__p();var g={shouldHideBody:function(a){__p&&__p();if(!a.has_attachment)return!1;for(var b=0;b<a.attachments.length;b++){var c=a.attachments[b];if(c.preview_url){c=g.getRawUrlFromSafeUrl(c.preview_url);if(a.body==c)return!0}}return!1},getRawUrlFromSafeUrl:function(a){return new(b("URI"))(a).getQueryData().url}};e.exports=g}),null);
__d("ChatBubble.react",["cx","DOMDimensions","EmojiOnlyMessage.react","MercuryMessageBody.react","MercuryMessageRenderLocations","MessagingGiftWrap.react","MessengerMathUtils","MessengerSupportedEmojiUtils","React","ReactDOM","joinClasses","messengerCustomColorUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h=2;c=b("React").createClass({displayName:"ChatBubble",_boxWidth:0,propTypes:{insideDecorators:a.arrayOf(a.object),attachments:a.node,body:a.string,className:a.string,customColor:a.string,customLike:a.object,isEmojiLike:a.bool,isFromViewer:a.bool,isGiftWrapped:a.bool,maxWidth:a.number.isRequired,message:a.object,metaRanges:a.array,onUnwrap:a.func,ranges:a.array,threadCustomColor:a.string,threadID:a.string},getInitialState:function(){return{emojis:undefined,bubbleWidth:null}},componentDidMount:function(){if(this.props.attachments&&!this.props.isEmojiLike)return;if(!this.props.emojis){var a=this.props.body||"";a=b("MessengerSupportedEmojiUtils").getEmojiOnlyContents(a);a&&a.length&&this.setState({emojis:a})}this._restyleBubble(this.props)},componentDidUpdate:function(a){(a.maxWidth!==this.props.maxWidth||a.body!==this.props.body||!a.attachments&&this.props.attachments)&&this._restyleBubble(a)},render:function(){__p&&__p();var a=this.props,c=a.attachments,d=a.body;d=d===undefined?"":d;var e=a.className,f=a.insideDecorators,g=a.maxWidth;a=babelHelpers.objectWithoutProperties(a,["attachments","body","className","insideDecorators","maxWidth"]);a=Object.assign({},a);delete a.customColor;delete a.customLike;delete a.isEmojiLike;delete a.isFromViewer;delete a.message;delete a.metaRanges;delete a.ranges;delete a.threadCustomColor;delete a.threadID;return b("React").createElement("div",babelHelpers["extends"]({},a,{className:b("joinClasses")("_5w1r"+(this.state.emojis?"":" _3_om")+(this.state.emojis?" _31xx":""),e),ref:"bubble",style:{maxWidth:g,width:this.state.emojis?null:this.state.bubbleWidth,wordWrap:d.length>=15?"break-word":"inherit"}}),b("React").createElement("div",{className:"_4gx_",ref:"inner"},this._renderContent(),c),f,this.props.isGiftWrapped?b("React").createElement(b("MessagingGiftWrap.react"),{onUnwrap:this.props.onUnwrap}):null)},_renderContent:function(){if(!this.props.body||this.props.isEmojiLike)return null;var a={},c=null;this.state.emojis?c=b("React").createElement(b("EmojiOnlyMessage.react"),{contents:this.state.emojis}):(c=b("React").createElement(b("MercuryMessageBody.react"),{body:this.props.body,ranges:this.props.ranges,metaRanges:this.props.metaRanges,threadID:this.props.threadID,customLike:this.props.customLike,threadCustomColor:this.props.threadCustomColor,isFromViewer:this.props.isFromViewer,renderLocation:b("MercuryMessageRenderLocations").CHAT}),this.props.customColor&&(a=b("messengerCustomColorUtils").customBubbleStyle(this.props.customColor,a)));return b("React").createElement("div",{className:"_d97"+(this.state.emojis?" _31xy":""),ref:"contentWrapper",style:a},b("React").createElement("span",{className:"_5yl5",ref:"content"},c))},_restyleBubble:function(a){__p&&__p();if(this.props.attachments||this.props.body!=null&&b("MessengerMathUtils").isMathBlock(this.props.body.trim())){this.setState({bubbleWidth:null});return}var c=b("ReactDOM").findDOMNode(this.refs.bubble);if(a.maxWidth!==this.props.maxWidth||b("DOMDimensions").getElementDimensions(c).width>this.props.maxWidth){a=this.props.maxWidth;this.setState({bubbleWidth:a},this._shrinkBubble);return}this._shrinkBubble()},_shrinkBubble:function(){var a=b("ReactDOM").findDOMNode(this.refs.bubble);a=b("DOMDimensions").getElementDimensions(a).width;var c=b("ReactDOM").findDOMNode(this.refs.content);c=c?b("DOMDimensions").getElementDimensions(c).width+b("DOMDimensions").measureElementBox(b("ReactDOM").findDOMNode(this.refs.contentWrapper),"width",!0,!1,!1):0;var d=c+h;c>0&&d<this.props.maxWidth&&a-d-this.getBoxWidth()>0&&this.setState({bubbleWidth:d})},contentWraps:function(){var a=b("ReactDOM").findDOMNode(this.refs.content);if(!a)return!1;var c=a.getClientRects();a=b("DOMDimensions").getElementDimensions(a).height;return c&&c.length>1&&c[0].height<a},getBoxWidth:function(){this._boxWidth||(this._boxWidth=b("DOMDimensions").measureElementBox(b("ReactDOM").findDOMNode(this.refs.bubble),"width",!0,!0,!1));return this._boxWidth}});e.exports=c}),null);
__d("ChatCodePasteUtils",["cx","BanzaiODS","ChatBubble.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=/`{3,}/;function a(a){return!!(a&&h.test(a)&&a.split("\n").length>1)}function c(a,c,d,e,f){__p&&__p();a=a.split(h);var g=[];for(var i=0;i<a.length;i+=2){var j=a[i].trim();j&&g.push(b("React").createElement("div",{key:i,className:"_5wde _n4o"},b("React").createElement(b("ChatBubble.react"),{body:j,customColor:f||undefined,className:"clearfix _5wdf",maxWidth:c,ranges:d||undefined,threadID:e||undefined})));if(i+1<a.length&&a[i+1]){j=a[i+1].split("\n");var k=j[0].replace(/[^a-zA-Z]+/g,"");j=j.slice(1).join("\n");b("BanzaiODS").bumpEntityKey("chat_code_paste","render_bubble");g.push(b("React").createElement("div",{key:i+1,className:"_5wde _n4o"},b("React").createElement("div",{ref:"bubble",className:"_3_om _4yng _5wdf"},b("React").createElement("div",{style:{maxWidth:c},ref:"syntaxTarget"+i,className:"language-"+k},j))))}}return g}e.exports={containsCodeBlock:a,getCodeAndMessageBubbles:c}}),null);
__d("ChatTabBlinking",["cx","CSS","clearInterval","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=600,i="highlightTitle";a={_blinkMap:{},_interval:null,_isHighlighting:!1,blinkTab:function(a,b){this._blinkMap[a]||(this._blinkMap[a]={view:b,elem:b.getTabElem()}),this.checkInterval()},unblinkTab:function(a){if(this._blinkMap[a]){var c=this._blinkMap[a].elem;c&&b("CSS").removeClass(c,i);delete this._blinkMap[a]}this.checkInterval()},checkInterval:function(){var a=Object.keys(this._blinkMap).length;a>0?this._interval||(this._interval=b("setIntervalAcrossTransitions")(this._toggleBlinkHighlight.bind(this),h)):this._interval&&(b("clearInterval")(this._interval),this._interval=null)},_toggleBlinkHighlight:function(){this._isHighlighting=!this._isHighlighting;for(var a in this._blinkMap)if(Object.prototype.hasOwnProperty.call(this._blinkMap,a)){var c=this._blinkMap[a],d=c.elem;c=c.view;d&&d.parentNode&&!c.isFocused()&&!c.isHovered()?b("CSS").conditionClass(d,i,this._isHighlighting):this.unblinkTab(a)}}};e.exports=a}),null);
__d("ChatCloseButton.react",["cx","fbt","Link.react","React","TrackingNodes","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.CLOSE_BUTTON),c=h._("Appuyez sur \u00c9chap pour fermer"),d=h._("Fermer l\u2019onglet"),e="_4vu4";return b("React").createElement(b("Link.react"),{"aria-label":this.props.active?c:d,className:b("joinClasses")(this.props.className,"close","button",e),"data-ft":a,"data-hover":"tooltip","data-tooltip-content":this.props.active?c:d,"data-tooltip-position":"above",onClick:this.props.onClick,onKeyUp:this.props.onKeyUp,onMouseDown:this.props.onMouseDown})};function a(){i.apply(this,arguments)}a.propTypes={onClick:c.func,onKeyUp:c.func,onMouseDown:c.func,active:c.bool};a.defaultProps={active:!1};e.exports=a}),null);
__d("ChatCollapsedLogMessageGroup.react",["cx","fbt","Link.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={collapsed:!0},b}a.prototype.render=function(){var a=h._("Voir la derni\u00e8re activit\u00e9"),c=h._("Voir moins d\u2019activit\u00e9");return b("React").createElement("div",{className:"_5w0o"},b("React").createElement(b("Link.react"),{className:"_4ea1",onClick:function(){return this.setState({collapsed:!this.state.collapsed})}.bind(this)},this.state.collapsed?a:c),this.state.collapsed?null:b("React").createElement("div",null,b("React").createElement("div",{className:"_2zsu"}),this.props.children,b("React").createElement("div",{className:"_2zsu"})))};e.exports=a}),null);
__d("ChatDateBreak.react",["cx","React","formatDate","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldComponentUpdate=function(a){"use strict";return this.props.date.getTime()!==a.date.getTime()};a.prototype.render=function(){"use strict";var a=b("formatDate")(this.props.date,{today:"g:ia",withinWeek:"D g:ia",thisYear:"M jS, g:ia",older:"m/d/Y g:ia"});return b("React").createElement("time",{className:b("joinClasses")(this.props.className,"_5w-5")},b("React").createElement("span",{className:"_5w-6"},a))};function a(){"use strict";h.apply(this,arguments)}a.propTypes={date:c.instanceOf(Date).isRequired};e.exports=a}),null);
__d("ChatMessage.react",["cx","fbt","BootloadedComponent.react","ChatAnimatedGifs","ChatBubble.react","EmojiLikeUtils","FluxContainer","MercuryTimestamp","CSS","immutable","ImmutableObject","Locale","JSResource","MercuryAttachment","MercuryConfig","MercuryErrorInfo","MercuryIDs","MercuryMessageCustomizations","MercuryMessageError.react","MercuryMessageInfo","MessageBorderType","MessageCustomizationType","MessagingGiftWrapChecker","MessengerDecorator","MessengerInnerDecorators.react","MessengerVideoAutoplayStore","ChatCodePasteUtils","MNCommerceMessageType","MercuryDisplayTimeFilterMessageRenderer","React","ReactDOM","TooltipData","XUISpinner.react","convertMIGColorToFIGColor","isRTL","joinClasses","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={isVisible:!1},this.$2=function(){return this.setState({hovered:!0})}.bind(this),this.$3=function(){return this.setState({hovered:!1})}.bind(this),b}a.getStores=function(){return[b("MessengerVideoAutoplayStore")]};a.calculateState=function(a,c){return{isVisible:b("MessengerVideoAutoplayStore").isVisible(c.message.thread_id,c.message.message_id)}};a.prototype.componentDidMount=function(){b("CSS").conditionClass(b("ReactDOM").findDOMNode(this),"_2cnu",this.isOneLine())};a.prototype.isOneLine=function(){var a=this.props.message;return b("MercuryMessageInfo").isInbound(a)&&!this.refs.attachmentsInside&&this.refs.bubble&&!this.refs.bubble.contentWraps()};a.prototype.shouldComponentUpdate=function(a,b){var c=a.message!==this.props.message,d=!1,e=!1,f=this.props.thread;if(f)d=f.custom_like_icon!==a.thread.custom_like_icon,e=f.custom_color!==a.thread.custom_color;else if(a.thread)return!0;return c||d||e||b.isVisible!==this.state.isVisible};a.prototype.render=function(){var a=this.props.message,c=b("MercuryAttachment").get(a).length>0,d=b("MercuryMessageInfo").isInbound(a),e=b("MercuryIDs").isGroupChat(a.thread_id),f=b("MercuryErrorInfo").hasErrorStatus(a);c="_5wd4"+(d?" _1nc7":"")+(d?"":" _1nc6")+(c?" _2_-t":"")+(d&&e?" _5ysy":"")+(f?" _1zcs":"");var g=this.props.isFromViewer,h=[],i=a;i&&b("MessengerDecorator").getBeforeDecorators().forEach(function(a){a.check(i)&&h.push(a.render(i,g))});d=this.$1("outside");return b("React").createElement("div",{className:b("joinClasses")(this.props.className,c),onMouseEnter:this.$2,onMouseLeave:this.$3},b("React").createElement("div",{className:"_h8t"},h,this.$4(d)),d?b("React").createElement(b("MessengerInnerDecorators.react"),{message:a,isFromViewer:g||!1,hovered:this.state.hovered,messageProps:this.props}):b("React").createElement("div",{className:"_40qi"}),this.$5(i,g),this.$6())};a.prototype.$4=function(a){var c=this.props.message,d={};if(b("MercuryMessageInfo").isOutbound(c)){var e=h._("{time}",[h._param("time",b("MercuryTimestamp").getPreciseTimestamp(c.timestamp))]);Object.assign(d,b("TooltipData").propsFor(e,"right"))}if(c.is_filtered_content)return b("React").createElement("div",babelHelpers["extends"]({className:"_5wd9 _5wdc uiBoxYellow clearfix",ref:"inner"},d),b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(c));e=c.body&&c.body!==""?b("isRTL")(c.body):b("Locale").isRTL();return b("React").createElement("div",babelHelpers["extends"]({className:"_5wd9"+(e?" direction_rtl":"")+(e?"":" direction_ltr"),ref:"inner"},d),this.$7(!a),a)};a.prototype.$5=function(a,c){__p&&__p();var d,e=this;if(a){var d=function(){var d=[],f=[];b("MessengerDecorator").getAfterExternalDecorators().forEach(function(b){a&&b.check(a)&&(d.push(b.render(a,c,this.props)),f.push(b.getAdditionalClassNames()))}.bind(e));if(f.length===0&&d.length===0)return{v:null};var g=f.join(" ");return{v:b("React").createElement("div",{className:b("joinClasses")(g,"_5ijz"+(c?"":" isFromOther"))},d)}}();if(typeof d==="object")return d.v}return null};a.prototype.$6=function(){var a=this.props.message;return a.is_filtered_content||!b("MercuryMessageInfo").hasError(a)?null:b("React").createElement("div",{className:"_3ry4",ref:"undertext"},b("React").createElement(b("MercuryMessageError.react"),{className:"_5wda clearfix",message:a,ref:"status"}),this.$8())};a.prototype.$8=function(){return this.props.message.is_spoof_warning?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("MercurySpoofWarning.react").__setRef("ChatMessage.react"),authorID:this.props.message.author,className:"_5wdb"}):null};a.prototype.$9=function(){return b("React").createElement("div",{style:{padding:"20px",text_align:"center",background:"white"}},b("React").createElement(b("XUISpinner.react"),null))};a.prototype.$1=function(a){if(this.props.message.commerce_message_type===b("MNCommerceMessageType").RIDE_INTENT)return null;var c=this.props.message,d=this.props.thread?this.props.thread.custom_like_icon:null,e=a=="inside"?"attachmentsInside":"attachmentsOutside",f=b("MercuryAttachment").get(c).filter(function(c){c=b("MercuryAttachment").isBubblePreferred(c);return c&&a==="inside"||!c&&a==="outside"}),g=this.props.thread?b("convertMIGColorToFIGColor")(this.props.thread.custom_color):"",h=[],i=[];a==="outside"&&c&&b("MessengerDecorator").getAfterDecorators().forEach(function(a){a.check(c,this.props.isFromViewer)&&(h.push(a.render(c,this.props.isFromViewer,this.props,this.state.hovered)),i.push(a.getAdditionalClassNames()))}.bind(this));return f.length>0?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:this.$9(),bootloadLoader:b("JSResource")("MercuryAttachments.react").__setRef("ChatMessage.react"),className:b("joinClasses")((a==="outside"?"_3e7u":"")+(c.body?" _16ys":"")+(g?" _3al":"")+" _n4o"+(h?" _1a6y":""),i),attachments:f,customLike:d,customColor:g,hasFlowerBorder:b("gkx")("AT7rTubr3N_DsfglfGkvVFG3tMrhGme9-eELltAXoSOKkQuD-9JepjOeFPMl1e8XndLLgVmcw1EaaNThD3K6r4QJpohV9bITGr6_ur1k_X_RGQ")&&b("MercuryMessageCustomizations").getCustomizationValue(c,b("MessageCustomizationType").BORDER)===b("MessageBorderType").FLOWERS&&a==="outside",isChat:!0,isGiftWrapped:b("MessagingGiftWrapChecker").shouldRenderWithGiftWrap(c)&&a==="outside",afterDecorators:h,isVisible:this.state.isVisible,maxWidth:this.props.maxBubbleWidth,message:c,onUnwrap:this.$10,onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,ref:e}):null};a.prototype.$7=function(a){__p&&__p();var c=this.props,d=c.isFromViewer,e=c.message;c=c.thread;var f=e.body,g=this.$1("inside"),h=[],i=[],j=[],k=e;k&&(a&&b("MessengerDecorator").getAfterDecorators().forEach(function(a){a.check(k,d)&&(h.push(a.render(k,d,this.props)),i.push(a.getAdditionalClassNames()))}.bind(this)),b("MessengerDecorator").getInsideDecorators().forEach(function(a){a.check(k,d)&&(j.push(a.render(k,d,this.props)),i.push(a.getAdditionalClassNames()))}.bind(this)),b("MessengerDecorator").getBeforeDecorators().forEach(function(a){a.check(k,d)&&i.push(a.getAdditionalClassNames())}));var l=i.join(" ");b("ChatAnimatedGifs").shouldHideBody(e)&&(f="");var m=e.ranges;e.profile_ranges&&e.profile_ranges.length&&(m=(m||[]).concat(e.profile_ranges.map(function(a){return babelHelpers["extends"]({},a,{url:"/"+a.id})})));var n=b("ChatCodePasteUtils").containsCodeBlock(f);return(f||g)&&!b("EmojiLikeUtils").isEmojiLike(e)?b("React").createElement("div",{className:b("joinClasses")(l,"_5wde _n4o")},n?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",{style:{height:22}}),bootloadLoader:b("JSResource")("ChatCodeBubble.react").__setRef("ChatMessage.react"),body:f,className:"_5wdf",maxWidth:this.props.maxBubbleWidth,ranges:m,threadID:e.thread_id,customColor:c&&d?b("convertMIGColorToFIGColor")(c.custom_color):""}):b("React").createElement(b("ChatBubble.react"),{attachments:g,body:f,className:"_5wdf",insideDecorators:j,isEmojiLike:!1,isFromViewer:this.props.isFromViewer,metaRanges:e.meta_ranges,message:e,maxWidth:this.props.maxBubbleWidth,ranges:m,ref:"bubble",threadID:e.thread_id,customLike:e.customLike,customColor:c&&d?b("convertMIGColorToFIGColor")(c.custom_color):"",threadCustomColor:c&&b("convertMIGColorToFIGColor")(c.custom_color)}),a?b("React").createElement(b("MessengerInnerDecorators.react"),{className:"_1z_2",message:e,isFromViewer:this.props.isFromViewer||!1,hovered:this.state.hovered,messageProps:this.props}):null,h):null};a.propTypes={message:c.instanceOf(b("ImmutableObject")).isRequired,maxBubbleWidth:c.number.isRequired,onAttachmentLoad:c.func,onStickerClick:c.func,participants:c.instanceOf(b("immutable").Map).isRequired,readReceipts:c.instanceOf(b("immutable").OrderedMap).isRequired,thread:c.instanceOf(b("ImmutableObject"))};e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("ChatMessageGroup.react",["cx","fbt","ChatConfig","ChatDateBreak.react","ChatMessage.react","CurrentUser","Image.react","immutable","ImmutableObject","MercuryConfig","MercuryIDs","MercuryParticipants","MercuryTimestamp","MessengerTextWithEmoticons.react","QE2Logger","React","ReactDOM"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("immutable").OrderedMap;c=b("React").PropTypes;var i=new(b("ImmutableObject"))({name:"",href:"#",image_src:""}),j=b("ChatConfig").get("chattab_rounded_profile",!1);d=b("React").createClass({displayName:"ChatMessageGroup",propTypes:{activeMessageID:c.string,author:c.string,hasDateBreak:c.bool,isCanonical:c.bool,isFromViewer:c.bool,isPageMessage:c.bool,isOnline:c.bool,maxBubbleWidth:c.number,messages:c.instanceOf(b("immutable").List).isRequired,readReceipts:c.instanceOf(a).isRequired,onAttachmentLoad:c.func,onStickerClick:c.func,personaID:c.string,thread:c.instanceOf(b("ImmutableObject")),threadID:c.string},getInitialState:function(){return{participants:{}}},componentDidMount:function(){b("QE2Logger").logExposureForUser("messenger_growth_tombstone"),this._subscription=this._computeParticipants()},shouldComponentUpdate:function(a,c){return this.props.isOnline!==a.isOnline||this.props.activeMessageID!==a.activeMessageID||this.props.isFromViewer!==a.isFromViewer||!b("immutable").is(this.props.messages,a.messages)||this.state.participants!==c.participants||!b("immutable").is(this.props.thread,a.thread)},componentDidUpdate:function(a){a=k(this.props);!this._subscription&&!a.every(function(a){return this.state.participants[a]}.bind(this))&&(this._subscription=this._computeParticipants())},componentWillUnmount:function(){this._subscription&&this._subscription.remove()},render:function(){return b("React").createElement("div",{className:"_4tdt"+(this.props.isFromViewer?" _ua0":"")+(this.props.isFromViewer?"":" _ua1")+(this._hasSeenHeadsAtBottom()?" _3lil":"")},this._renderProfileColumn(),b("React").createElement("div",{className:"_ua2"},this._renderName(),b("React").createElement("div",{className:"_4tdv"},this._renderMessages())))},_renderProfileColumn:function(){if(this.props.isFromViewer)return null;var a=this.state.participants[this.props.author]||i;this.props.personaID&&(a=this.state.participants[this.props.personaID]||i);var c=h._("{name} {time}",[h._param("name",a.name),h._param("time",b("MercuryTimestamp").getPreciseTimestamp(this.props.messages.last().timestamp))]),d=a.image_src?b("React").createElement(b("Image.react"),{src:a.image_src}):null,e=b("MercuryConfig").GDWC&&this.props.isOnline,f=b("CurrentUser").isWorkUser()&&a.is_coworker===!1;return b("React").createElement("div",{className:"_31o4"+(j?" _3njy":"")},b("React").createElement("a",{"aria-label":c,className:"_4tdw","data-hover":"tooltip","data-tooltip-content":c,"data-tooltip-position":"left",href:a.href,ref:"link"},d),f?b("React").createElement("div",{className:"_4rwx _4rwy"}):e?b("React").createElement("div",{className:"_sce"}):null)},_renderName:function(){__p&&__p();if(this.props.isCanonical&&!this.props.personaID||this.props.isFromViewer)return null;var a=this.props.personaID?this.state.participants[this.props.personaID]:this.state.participants[this.props.messages.first().author];if(!a)return null;if(this.props.messages.first().replied_to_message)return null;var c=a.short_name;if(this.props.thread&&this.props.thread.custom_nickname){var d=b("MercuryIDs").getUserIDFromParticipantID(a.id);this.props.thread.custom_nickname[d]&&(c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:this.props.thread.custom_nickname[d]}))}if(this.props.personaID){d=this.state.participants[this.props.messages.first().author];c=d?h._("{persona name} de {page name}",[h._param("persona name",a.name),h._param("page name",d.short_name)]):a.name}return b("React").createElement("div",{className:"_4tdx"},c)},_renderMessages:function(){var a=this.props.messages.size,c=[];this.props.messages.forEach(function(d,e,f){var g=d.message_id===this.props.activeMessageID;g&&!(e===0&&this.props.hasDateBreak)&&c.push(b("React").createElement(b("ChatDateBreak.react"),{date:new Date(d.timestamp),key:"db:"+d.message_id}));c.push(b("React").createElement(b("ChatMessage.react"),{isFromViewer:this.props.isFromViewer,key:d.message_id,maxBubbleWidth:this.props.maxBubbleWidth,message:d,participants:b("immutable").Map(this.state.participants),readReceipts:this.props.readReceipts,ref:d.message_id,nextTimestamp:this._getNextTimestamp(f,a,e),onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,thread:this.props.thread}))}.bind(this));return c},_hasSeenHeadsAtBottom:function(){var a=this.props,b=a.messages,c=a.nextTimestamp;a=a.readReceipts;var d=b.last().timestamp,e=0;a.forEach(function(a){return a>=d&&a<c&&++e===2?!1:null});return e===2},_getNextTimestamp:function(a,b,c){return c<b-1?a.get(c+1).timestamp:this.props.nextTimestamp},getMessageElement:function(a){return b("ReactDOM").findDOMNode(this.refs[a])},_computeParticipants:function(){__p&&__p();var a=k(this.props),c={},d=[];a.forEach(function(a){var e=b("MercuryParticipants").getNow(a);c[a]=b("MercuryParticipants").getNow(a);e||d.push(a)});this.setState({participants:c});return d.length>0?b("MercuryParticipants").getMulti(d,function(b){var a=this.state.participants;d.forEach(function(c){a[c]=b[c]});this._subscription=null;this.setState({participants:a})}.bind(this)):null}});function k(a){var b=a.personaID?a.personaID:a.author,c=[b];a.readReceipts.forEach(function(a,b){c.push(b)});return c}e.exports=d}),null);
__d("MercuryMessageRendererUtils",["cx","invariant","HovercardLink","MercuryViewer","MessengerTextWithEmoticons.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a={getLinkToParticipant:function(a,c){var d=a.fbid,e=b("HovercardLink").constructEndpoint({id:d});c=c&&c.custom_nickname&&c.custom_nickname[d];c&&(c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:c}));d=c?c:a.name;return a.href?b("React").createElement("a",{className:"_5wzt",href:a.href,"data-hovercard":e},d):d},moveCurrentUserToFront:function(){var a=arguments.length<=0||arguments[0]===undefined?[]:arguments[0];a||h(0);var c=a.indexOf(b("MercuryViewer").getID());if(c>0){var d=a.filter(function(a){return a!==b("MercuryViewer").getID()});return[b("MercuryViewer").getID()].concat(d)}return a}};e.exports=a}),null);
__d("MercuryLogMessageRenderer",["cx","fbt","invariant","ix","Bootloader","CSS","Image.react","MercuryAttachmentViewer","MercuryViewer","MercuryLogMessageType","MessagingSourceEnum","MessengerAdminGroupUtils","MessengerLightweightActionUtils","MessengerTextWithEmoticons.react","MercuryParticipants","React","ReactDOM","MercuryMessageRendererUtils","MercuryThreads","TooltipLink.react","UserAgent","convertMIGColorToFIGColor"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("MercuryThreads").get();a={renderText:function(a,c,d,e){__p&&__p();c=c||k.getThreadMetaNow(a.thread_id);if(b("MessengerLightweightActionUtils").isLWAMessage(a)){e(b("MessengerLightweightActionUtils").getCollapsedLWAText(a));return}switch(a.log_message_type){case b("MercuryLogMessageType").SUBSCRIBE:var f=a.author;a.log_message_data||i(0);var g=a.log_message_data.added_participants;g||i(0);f=g.length===1&&f===g[0];f?b("Bootloader").loadModules(["MercuryJoinableMessageRenderer"],function(b){b.renderText(a,c,e)},"MercuryLogMessageRenderer"):n(a,e);break;case b("MercuryLogMessageType").UNSUBSCRIBE:b("MessengerAdminGroupUtils").isJoinableThread(c)?b("MessengerAdminGroupUtils").isGroupChat(c)?B(a,e):t(a,e):s(a,e);break;case b("MercuryLogMessageType").THREAD_NAME:c&&b("MessengerAdminGroupUtils").isWorkGroupSyncedChat(c)&&b("MessengerAdminGroupUtils").isWorkSyncedChatThreadCreationMessage(a)?w(a,e):c&&b("MessengerAdminGroupUtils").isJoinableThread(c)?b("MessengerAdminGroupUtils").isGroupChat(c)?C(a,c,e):u(a,c,e):x(a,c,e);break;case b("MercuryLogMessageType").THREAD_IMAGE:c&&b("MessengerAdminGroupUtils").isJoinableThread(c)?b("MessengerAdminGroupUtils").isGroupChat(c)?D(a,c,e):y(a,c,e):z(a,c,e);break;case b("MercuryLogMessageType").WALLPAPER:A(a,e);break;case b("MercuryLogMessageType").GENERIC_ADMIN_TEXT:var h=b("convertMIGColorToFIGColor")(c&&c.custom_color);b("Bootloader").loadModules(["MercuryXMATRenderer"],function(b){e(b.renderText(h,a,d))},"MercuryLogMessageRenderer");break;default:b("Bootloader").loadModules(["MercurySpecialLogMessageRenderer"],function(b){b.renderText(a,e)},"MercuryLogMessageRenderer");break}},renderIcon:function(a){return b("React").createElement(b("Image.react"),{className:l(a.log_message_type,a.log_message_data),src:j("99239")})},renderLegacy:function(a,c,d,e){l(e.log_message_type,e.log_message_data).split(" ").forEach(function(c){return c&&b("CSS").addClass(a,c)}),this.renderText(e,null,!1,function(a){b("ReactDOM").render(b("React").createElement("span",null,a),c)}),this.renderAttachmentLegacy(d,e)},renderAttachmentLegacy:function(a,c){c.log_message_type===b("MercuryLogMessageType").THREAD_IMAGE&&(function(){c.log_message_data||i(0);var d=c.log_message_data.image;d&&d.preview_url&&(b("ReactDOM").render(b("React").createElement(b("Image.react"),{className:"_z6a",onClick:function(){return m(d)},src:d.preview_url}),a),b("CSS").show(a))})()}};e.exports=a;function l(a,c){c=!!(c&&c.answered);return"_5wzu"+(a===b("MercuryLogMessageType").SUBSCRIBE?" _5wzj":"")+(a===b("MercuryLogMessageType").UNSUBSCRIBE?" _5wzk":"")+(a===b("MercuryLogMessageType").THREAD_NAME?" _5wzl":"")+(a===b("MercuryLogMessageType").THREAD_IMAGE?" _5wzm":"")+(a===b("MercuryLogMessageType").VIDEO_CALL&&c?" _5wzn":"")+(a===b("MercuryLogMessageType").VIDEO_CALL&&!c?" _5wzo":"")+(a===b("MercuryLogMessageType").PHONE_CALL&&c?" _5wzp":"")+(a===b("MercuryLogMessageType").PHONE_CALL&&!c?" _5wzq":"")+(a===b("MercuryLogMessageType").SERVER_ERROR?" _5wzr":"")+(a?"":" _2r5l")}function m(a){b("MercuryAttachmentViewer").bootstrapWithConfig({src:a.preview_url,endpoint:a.url,fbid:a.metadata.fbid,dimensions:a.metadata.dimensions,disablePaging:!0},null)}function n(a,c){__p&&__p();a.log_message_data||i(0);var d=b("MercuryMessageRendererUtils").moveCurrentUserToFront(a.log_message_data.added_participants);d||i(0);switch(d.length){case 1:o(a,c,d);break;case 2:p(a,c,d);break;case 3:q(a,c,d);break;default:r(a,c,d);break}}function o(a,c,d){var e=[a.author,d[0]];b("MercuryParticipants").getMulti(e,function(e){a.author===b("MercuryViewer").getID()?c(h._("Vous avez ajout\u00e9 {subscriber1}.",[h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]]))])):d[0]===b("MercuryViewer").getID()?c(h._("{actor} vous a ajout\u00e9(e).",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author]))])):c(h._("{actor} a ajout\u00e9 {subscriber1}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]]))]))})}function p(a,c,d){var e=[a.author].concat(d);b("MercuryParticipants").getMulti(e,function(e){a.author===b("MercuryViewer").getID()?c(h._("Vous avez ajout\u00e9 {subscriber1} et {subscriber2}.",[h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]]))])):d[0]===b("MercuryViewer").getID()?c(h._("{actor} vous a ajout\u00e9(e), avec {subscriber2}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]]))])):c(h._("{actor} a ajout\u00e9 {subscriber1} et {subscriber2}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]]))]))})}function q(a,c,d){var e=[a.author].concat(d);b("MercuryParticipants").getMulti(e,function(e){a.author===b("MercuryViewer").getID()?c(h._("Vous avez ajout\u00e9 {subscriber1}, {subscriber2} et {subscriber3}.",[h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]])),h._param("subscriber3",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[2]]))])):d[0]===b("MercuryViewer").getID()?c(h._("{actor} vous a ajout\u00e9(e), avec {subscriber2} et {subscriber3}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]])),h._param("subscriber3",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[2]]))])):c(h._("{actor} a ajout\u00e9 {subscriber1}, {subscriber2} et {subscriber3}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]])),h._param("subscriber3",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[2]]))]))})}function r(a,c,d){var e=[a.author].concat(d);b("MercuryParticipants").getMulti(e,function(e){function f(a){var c=b("React").createElement("div",null,a.map(function(a){return b("React").createElement("div",null,a.name)}));return b("React").createElement(b("TooltipLink.react"),{alignH:"center",position:"above",tooltip:c},h._({"*":"{num} de plus"},[h._param("num",a.length,[0])]))}var g=d.map(function(a){return e[a]});a.author===b("MercuryViewer").getID()?c(h._("Vous avez ajout\u00e9 {subscriber1}, {subscriber2} et {more_people}.",[h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(g[0])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(g[1])),h._param("more_people",f(g.slice(2)))])):d[0]===b("MercuryViewer").getID()?c(h._("{actor} vous a ajout\u00e9(e), avec {subscriber2} et {more_people}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(g[1])),h._param("more_people",f(g.slice(2)))])):c(h._("{actor} a ajout\u00e9 {subscriber1}, {subscriber2} et {more_people}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(g[0])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(g[1])),h._param("more_people",f(g.slice(2)))]))})}function s(a,c){__p&&__p();var d=[a.author];a.log_message_data||i(0);var e=a.log_message_data.removed_participants;e||i(0);var f=void 0;e.length===1&&(f=e[0],d.push(f));b("MercuryParticipants").getMulti(d,function(d){var e=d[a.author];d=d[f];a.author===b("MercuryViewer").getID()?!f||f===a.author?c(h._("Vous avez quitt\u00e9 la conversation.")):c(h._("Vous avez retir\u00e9 {name} de la conversation.",[h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))])):!f||f===a.author?c(h._("{actor} a quitt\u00e9 la conversation.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):f===b("MercuryViewer").getID()?c(h._({"*":"{actor} vous a retir\u00e9 de la conversation.","2":"{actor} vous a retir\u00e9e de la conversation.","__vcg":1},[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):c(h._("{actor} a retir\u00e9 {name} de la conversation.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e)),h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))]))})}function t(a,c){__p&&__p();var d=[a.author];a.log_message_data||i(0);var e=a.log_message_data.removed_participants;e||i(0);var f=void 0;e.length===1&&(f=e[0],d.push(f));b("MercuryParticipants").getMulti(d,function(d){var e=d[a.author];d=d[f];a.author===b("MercuryViewer").getID()?!f||f===a.author?c(h._("Vous avez quitt\u00e9 le salon.")):c(h._("Vous avez supprim\u00e9 {name} du salon.",[h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))])):!f||f===a.author?c(h._("{actor} left the room.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):f===b("MercuryViewer").getID()?c(h._("{actor} vous a supprim\u00e9 du salon.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):c(h._("{actor} a supprim\u00e9 {name} du salon.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e)),h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))]))})}function u(a,c,d){__p&&__p();a.log_message_data||i(0);var e=a.log_message_data.name,f="_5wzs"+(b("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(a.author===b("MercuryViewer").getID())if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("Vous avez nomm\u00e9 le salon\u00a0: {name}.",[h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("Vous avez supprim\u00e9 le nom du salon."));else b("MercuryParticipants").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a,c);if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("{actor} a nomm\u00e9 le salon\u00a0: {name}.",[h._param("actor",a),h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("{actor} a supprim\u00e9 le nom du salon.",[h._param("actor",a)]))})}function v(a,c,d,e,f){a.author===b("MercuryViewer").getID()?f(h._("Vous avez nomm\u00e9 le groupe {thread_name}. Votre groupe est aussi sur Facebook.",[h._param("thread_name",b("React").createElement("span",{className:e},b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:d})))])):b("MercuryParticipants").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a,c);f(h._("{actor} a nomm\u00e9 le groupe {thread_name}. Votre groupe est aussi sur Facebook.",[h._param("actor",a),h._param("thread_name",b("React").createElement("span",{className:e},b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:d})))]))})}function w(a,c){a.log_message_data||i(0);a=a.log_message_data.name;var d="_5wzs"+(b("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(a){c(h._("Vous pouvez \u00e0 pr\u00e9sent discuter avec {name} sur Workplace Chat.",[h._param("name",b("React").createElement("span",{className:d},b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:a})))]));return}}function x(a,c,d){__p&&__p();a.log_message_data||i(0);var e=a.log_message_data.name,f="_5wzs"+(b("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(e&&a.tags&&a.tags.indexOf(b("MessagingSourceEnum").EVENT_UPCOMING_BUMP)!==-1)d(h._("Le groupe a \u00e9t\u00e9 nomm\u00e9 {name}.",[h._param("name",b("React").createElement("span",{className:f},b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e})))]));else if(e&&a.tags&&a.tags.indexOf(b("MessagingSourceEnum").GROUPSYNC_NAMING)!==-1)v(a,c,e,f,d);else if(a.author===b("MercuryViewer").getID())if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("Vous avez nomm\u00e9 la conversation\u00a0: {name}.",[h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("Vous avez supprim\u00e9 le nom de la conversation."));else b("MercuryParticipants").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a,c);if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("{actor} a nomm\u00e9 la conversation\u00a0: {name}.",[h._param("actor",a),h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("{actor} a supprim\u00e9 le nom de la conversation.",[h._param("actor",a)]))})}function y(a,c,d){a.author===b("MercuryViewer").getID()?(a.log_message_data||i(0),a.log_message_data.image?d(h._("Vous avez chang\u00e9 la photo du salon.")):d(h._("Vous avez supprim\u00e9 la photo du salon."))):b("MercuryParticipants").get(a.author,function(e){e=b("MercuryMessageRendererUtils").getLinkToParticipant(e,c);a.log_message_data||i(0);a.log_message_data.image?d(h._("{actor} a chang\u00e9 la photo du salon.",[h._param("actor",e)])):d(h._("{actor} a supprim\u00e9 la photo du salon.",[h._param("actor",e)]))})}function z(a,c,d){a.tags!==undefined&&a.tags.indexOf(b("MessagingSourceEnum").EVENT_UPCOMING_BUMP)!==-1?d(h._("L\u2019image de la conversation a \u00e9t\u00e9 choisie.")):a.author===b("MercuryViewer").getID()?(a.log_message_data||i(0),a.log_message_data.image?d(h._("Vous avez chang\u00e9 l\u2019image de la conversation.")):d(h._("Vous avez supprim\u00e9 l\u2019image de la conversation."))):b("MercuryParticipants").get(a.author,function(e){e=b("MercuryMessageRendererUtils").getLinkToParticipant(e,c);a.log_message_data||i(0);a.log_message_data.image?d(h._("{actor} a chang\u00e9 l\u2019image de la conversation.",[h._param("actor",e)])):d(h._("{actor} a supprim\u00e9 l\u2019image de la conversation.",[h._param("actor",e)]))})}function A(a,c){a.author===b("MercuryViewer").getID()?c(h._("Vous avez chang\u00e9 le fond d\u2019\u00e9cran.")):b("MercuryParticipants").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a);c(h._("{actor} a chang\u00e9 le fond d\u2019\u00e9cran.",[h._param("actor",a)]))})}function B(a,c){__p&&__p();var d=[a.author];a.log_message_data||i(0);var e=a.log_message_data.removed_participants;e||i(0);var f=void 0;e.length===1&&(f=e[0],d.push(f));b("MercuryParticipants").getMulti(d,function(d){var e=d[a.author];d=d[f];a.author===b("MercuryViewer").getID()?!f||f===a.author?c(h._("Vous avez quitt\u00e9 la discussion.")):c(h._("Vous avez supprim\u00e9 {name} de la discussion.",[h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))])):!f||f===a.author?c(h._("{actor} a quitt\u00e9 la discussion.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):f===b("MercuryViewer").getID()?c(h._({"*":"{actor} vous a retir\u00e9 de la discussion.","2":"{actor} vous a retir\u00e9e de la discussion.","__vcg":1},[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):c(h._("{actor} a supprim\u00e9 {name} de la discussion.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e)),h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))]))})}function C(a,c,d){__p&&__p();a.log_message_data||i(0);var e=a.log_message_data.name,f="_5wzs"+(b("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(a.author===b("MercuryViewer").getID())if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("Vous avez nomm\u00e9 la discussion\u00a0: {name}.",[h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("Vous avez supprim\u00e9 le nom de la discussion."));else b("MercuryParticipants").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a,c);if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("{actor} a nomm\u00e9 la discussion\u00a0: {name}.",[h._param("actor",a),h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("{actor} a supprim\u00e9 le nom de la discussion.",[h._param("actor",a)]))})}function D(a,c,d){a.author===b("MercuryViewer").getID()?(a.log_message_data||i(0),a.log_message_data.image?d(h._("Vous avez modifi\u00e9 l\u2019image de la discussion.")):d(h._("Vous avez supprim\u00e9 l\u2019image de la discussion."))):b("MercuryParticipants").get(a.author,function(e){e=b("MercuryMessageRendererUtils").getLinkToParticipant(e,c);a.log_message_data||i(0);a.log_message_data.image?d(h._("{actor} a modifi\u00e9 l\u2019image de la discussion.",[h._param("actor",e)])):d(h._("{actor} a supprim\u00e9 l\u2019image de la discussion.",[h._param("actor",e)]))})}}),null);
__d("MercuryLogMessage.react",["cx","fbt","DOM","DOMDimensions","Event","EventReminderRequestHelper","ImmutableObject","MercuryLogMessageRenderer","MercuryLogMessageType","MessagingGenericAdminTextType","React","ReactDOM","ShimButton.react","cancelAnimationFrame","emptyFunction","formatDate","joinClasses","requestAnimationFrame","requireWeak"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j=266;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={messageText:null,showEventReminderFlyout:!1},this.$4=function(){this.$5()}.bind(this),this.$9=function(){!this.state.showEventReminderFlyout?b("EventReminderRequestHelper").fetchEventReminder(this.props.thread.thread_id,this.props.thread.lightweight_event.oid,function(){this.$1&&this.setState({showEventReminderFlyout:!0})}.bind(this)):this.setState({showEventReminderFlyout:!1})}.bind(this),this.$11=function(a){a!==this.state.showEventReminderFlyout&&this.setState({showEventReminderFlyout:a})}.bind(this),c}a.prototype.componentDidMount=function(){this.$1=!0,this.UNSAFE_componentWillReceiveProps(this.props)};a.prototype.componentWillUnmount=function(){this.$1=!1,this.$2&&b("cancelAnimationFrame")(this.$2)};a.prototype.$3=function(){return b("React").createElement(b("ShimButton.react"),{form:"link",onClick:this.$4},h._("Afficher les messages pr\u00e9c\u00e9dents."))};a.prototype.$5=function(){var a=this.props.loadMoreMessages&&this.props.loadMoreMessages();if(!this.$1)return;if(a)this.setState({messageText:this.$3()});else{a=h._("Messages pr\u00e9c\u00e9dents introuvables.");this.setState({messageText:a})}};a.prototype.UNSAFE_componentWillReceiveProps=function(a){if(a.message.log_message_type===b("MercuryLogMessageType").SERVER_ERROR)return;b("MercuryLogMessageRenderer").renderText(a.message,a.thread,a.isLastOfType,function(a){this.$1&&this.setState({messageText:a})}.bind(this))};a.prototype.shouldComponentUpdate=function(a,b){return this.state.messageText!=b.messageText||a.maxWidth!==this.props.maxWidth||this.state.showEventReminderFlyout!==b.showEventReminderFlyout};a.prototype.componentDidUpdate=function(){this.$6();if(!this.refs.attachment)return;b("MercuryLogMessageRenderer").renderAttachmentLegacy(this.refs.attachment,this.props.message);b("DOM").scry(this.refs.wrap,"img").forEach(function(a){var c=b("Event").listen(a,"load",function(){this.$6(),c.remove()}.bind(this))}.bind(this))};a.prototype.render=function(){return b("React").createElement("div",babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"_5ye6"),ref:"wrap",style:babelHelpers["extends"]({},this.props.style,this.$7()),title:b("formatDate")(new Date(this.props.message.timestamp),"g:ia")}),b("React").createElement("div",{className:"_5ye7"},b("MercuryLogMessageRenderer").renderIcon(this.props.message),this.state.messageText),b("React").createElement("div",{className:"_5ye8",ref:"attachment"},this.$8()))};a.prototype.$8=function(){__p&&__p();if(this.props.thread&&!this.props.thread.lightweight_event||!this.props.message.log_message_data)return null;var a=void 0;b("requireWeak")("EventReminderStateStore",function(b){a=b.getEvent(this.props.thread.thread_id)}.bind(this));if(!a||!a.exists)return null;var c;b("requireWeak")("Link.react",function(a){c=a});var d=void 0;switch(this.props.message.log_message_data.message_type){case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE:d=h._("Modifier");break;default:d=null}d=b("React").createElement(c,{href:"#",onClick:this.$9,title:h._("Modifier l\u2019\u00e9v\u00e8nement"),ref:"event_rem_link"},d);this.props.displayItems&&(d=null);return b("React").createElement("span",null,d,this.$10())};a.prototype.$10=function(){__p&&__p();if(!this.state.showEventReminderFlyout)return null;var a="right",c=b("ReactDOM").findDOMNode(this.refs.wrap);c&&c instanceof Element&&c.getBoundingClientRect().left<j&&(a="left");c={alignment:a,position:"above",contextRef:function(){return this.refs.event_rem_link}.bind(this),shown:this.state.showEventReminderFlyout,onToggle:this.$11};a=void 0;b("requireWeak")("EventsActionsLogger",function(b){a=b});var d={action_history:[{surface:a.Surface.MESSENGER_CHAT_TAB,mechanism:a.Mechanism.REMINDER_ADMIN_TEXT}]};c={threadID:this.props.thread.thread_id,dialogProps:c,flyoutNoSheet:!0,isEditing:!0,actionContext:d};var e;b("requireWeak")("ChatEventReminderContainer.react",function(a){e=a});return b("React").createElement(e,c)};a.prototype.$7=function(){return this.props.maxWidth?{maxWidth:this.props.maxWidth}:null};a.prototype.$6=function(){this.$2&&b("cancelAnimationFrame")(this.$2),this.$2=b("requestAnimationFrame")(function(){this.props.onImageLoad&&this.props.onImageLoad(b("DOMDimensions").getElementDimensions(this.refs.wrap).height),delete this.$2}.bind(this))};a.propTypes={loadMoreMessages:c.func,maxWidth:c.number,message:c.instanceOf(b("ImmutableObject")).isRequired,onImageLoad:c.func,thread:c.object};a.defaultProps={onImageLoad:b("emptyFunction")};e.exports=a}),null);
__d("ChatConversation.react",["ChatCollapsedLogMessageGroup.react","ChatDateBreak.react","ChatMessageGroup.react","immutable","MercuryLogMessage.react","MercuryIDs","MessengerReadReceipt.bs","MessageList.react","React","MercuryShareAttachmentRenderLocations","cancelAnimationFrame","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("immutable").OrderedMap;a=b("React").PropTypes;c=b("React").createClass({displayName:"ChatConversation",_raf:undefined,_onMountTimeout:undefined,propTypes:{contextBanner:a.object,isCanonical:a.bool.isRequired,loadMoreMessages:a.func,maxBubbleWidth:a.number.isRequired,messages:a.instanceOf(b("immutable").List).isRequired,onAttachmentLoad:a.func,onMount:a.func,onlineUsers:a.instanceOf(b("immutable").List).isRequired,onStickerClick:a.func,viewer:a.string.isRequired,thread:a.object,threadID:a.string.isRequired},componentDidMount:function(){this._raf=b("requestAnimationFrame")(function(){this._onMountTimeout=setTimeout(function(){this.props.onMount&&this.props.onMount(),delete this._onMountTimeout}.bind(this),0),delete this._raf}.bind(this))},componentWillUnmount:function(){this._raf&&b("cancelAnimationFrame")(this._raf),clearTimeout(this._onMountTimeout)},render:function(){return b("React").createElement("div",null,this.props.contextBanner,b("React").createElement(b("MessageList.react"),{DateBreak:b("ChatDateBreak.react"),LogMessage:b("MercuryLogMessage.react"),MessageGroup:b("ChatMessageGroup.react"),deliveryTimestamp:0,isCanonical:this.props.isCanonical,location:b("MercuryShareAttachmentRenderLocations").CHAT,loadMoreMessages:this.props.loadMoreMessages,maxBubbleWidth:this.props.maxBubbleWidth,CollapsedLogMessageGroup:b("ChatCollapsedLogMessageGroup.react"),messages:this.props.messages,onAttachmentLoad:this.props.onAttachmentLoad,onlineUsers:this.props.onlineUsers,onStickerClick:this.props.onStickerClick,readReceipts:this._calculateReceipts(this.props),ref:"messageList",viewer:this.props.viewer,thread:this.props.thread,threadID:this.props.threadID}))},_calculateReceipts:function(a){__p&&__p();var c=b("MercuryIDs").getParticipantIDFromUserID(a.viewer),d=b("MessengerReadReceipt.bs").getSeenTimestamps(a.readReceipts,a.threadID),e=new Set(a.thread?a.thread.participants:d.keys());e["delete"](c);return d.withMutations(function(c){b("immutable").Seq(a.messages).reverse().forEach(function(a){if(e.size===0)return!1;if(!e.has(a.author))return null;c.update(a.author,function(b){return!b||b.watermark<=a.timestamp?{watermark:a.timestamp,action:a.timestamp}:b});e["delete"](a.author);return null})})},getMessageList:function(){return this.refs.messageList}});e.exports=c}),null);
__d("ChatEditParticipantsUtils",["AsyncDialog","AsyncRequest","MercuryIDs","MercuryThreadIDMap","URI"],(function(a,b,c,d,e,f){"use strict";var g=b("MercuryThreadIDMap").get();a={showParticipantsModal:function(a){if(!b("MercuryIDs").isGroupChat(a))return;g.getServerIDFromClientID(a,function(a){b("AsyncDialog").send(new(b("AsyncRequest"))(new(b("URI"))("/ajax/browser/dialog/multichat_members/").addQueryData({id:a})))})}};e.exports=a}),null);
__d("ChatTabComposerContainer.react",["cx","fbt","Bootloader","ChatComposer","FantaMessageActions","FantaTypeComposer","MercuryIDs","MercuryMessageActions","MercuryParticipants","MercuryShareAttachmentRenderLocations","MercuryThreads","MessengerBotMenuDataFetcher","MNCommercePageSetting","P2PGKValues","React","ReactComponentWithPureRenderMixin","SearchableEntry","SimpleXUIDialog","getPageIDFromThreadID","getThreadTypeNameFromThreadType","gkx","nullthrows","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ChatComposer").ChatComposer,j="right";a=b("React").PropTypes;var k=b("gkx")("AT74KMJ8RYhvB1tMU93uHQ5gZqTAUi_w-rBy6KswPeaIPbVgyCy23kvmxPapx5bD4puY3bmrQeh4Z7ALUGarUq4kATHuSQM2CsFm5KKmhgZoYA");c=b("React").createClass({displayName:"ChatTabComposerContainer",_threadSubscription:null,_threadFetchSubscription:null,_participantSubscription:null,mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{composer:a.object.isRequired,disableInput:a.bool.isRequired,fileUploader:a.object,inputKeyDown:a.func,onEscape:a.func,onFileUploadFail:a.func,onPhotoUploadFail:a.func,onStickerSelect:a.func,onTab:a.func,onUploadCancel:a.func,onUploadComplete:a.func,onUploadSubmit:a.func,threadID:a.string,handleSend:a.func,viewer:a.string.isRequired},_inputRef:null,_photoUploader:null,_setTextImmediate:null,statics:{getDerivedStateFromProps:function(a,b){b=b.thread;b=b?b.thread_id:null;return a.threadID!==b?{participants:[]}:null}},getInitialState:function(){return{thread:null,participants:[],showP2PButton:this._getShowP2PButton(),pageID:b("getPageIDFromThreadID")(this.props.threadID),showStructuredMenu:this._getShowStructuredMenu()}},componentDidMount:function(){this.props.onMount(this),this.state.pageID&&b("MessengerBotMenuDataFetcher").getHasPageSetting(this.state.pageID,function(a){this.setState({showStructuredMenu:a})}.bind(this),function(){this.setState({showStructuredMenu:!1})}.bind(this),b("MNCommercePageSetting").STRUCTURED_MENU_ENABLED),this._threadSubscription=b("MercuryThreads").addListener("change",function(){this.setState(this._computeState())}.bind(this)),this.setState(this._computeState())},componentDidUpdate:function(){var a=this.state.thread;a=a?a.thread_id:null;if(a===this.props.threadID)return;this.setState(this._computeState())},componentWillUnmount:function(){var a=b("MercuryThreads").getForFBID(this.props.viewer);this._threadSubscription&&this._threadSubscription.remove();this._threadFetchSubscription&&a.unsubscribe(this._threadFetchSubscription);this._participantSubscription&&this._participantSubscription.remove()},_computeState:function(){var a=this.props.threadID;if(!a)return{thread:null,participants:[]};var c=b("MercuryThreads").getForFBID(this.props.viewer),d=c.getThreadMetaNow(a),e=[];!d?(this._threadFetchSubscription&&c.unsubscribe(this._threadFetchSubscription),this._threadFetchSubscription=c.getMultiThreadMeta([a],function(b){b=b[a];this._threadFetchSubscription=null;this.setState({thread:b,participants:this._computeParticipants(b)})}.bind(this))):e=this._computeParticipants(d);return{thread:d,participants:e}},_computeParticipants:function(a){__p&&__p();if(!a)return[];var c=[],d=[];a.participants.forEach(function(a){var e=b("MercuryParticipants").getNow(a);e?d.push(e):c.push(a)});c.length>0&&(this._participantSubscription&&this._participantSubscription.remove(),this._participantSubscription=b("MercuryParticipants").getMulti(c,function(b){this._participantSubscription=null,this.setState({participants:a.participants.map(function(a){return b[a]})})}.bind(this)));return d},_getShowP2PButton:function(){return b("P2PGKValues").P2PVisible&&this.props.viewer!==b("MercuryIDs").getUserIDFromThreadID(this.props.threadID)},_getShowStructuredMenu:function(){var a=b("getPageIDFromThreadID")(this.props.threadID);return a===null||a===undefined?!1:b("MessengerBotMenuDataFetcher").getHasPageSetting(a,function(){},function(){},b("MNCommercePageSetting").STRUCTURED_MENU_ENABLED)},render:function(){var a=this.props.composer;return k?b("React").createElement(i,{composer:a,fileUploader:this.props.fileUploader,handleSend:this.props.handleSend,handleSendClick:this._handleSendClick,inputRef:function(a){return this._inputRef=a}.bind(this),defaultText:a.text,onEmojiSelect:this._handleEmojiSelect,onEscape:this._handleEscape,onInputKeyDown:this._handleInputKeyDown,onTab:this.props.onTab,onTextChange:this._onTextChange,onUploaderMount:function(a){return this._photoUploader=a}.bind(this),pageID:this.state.pageID,participantIDs:undefined,participants:this.state.participants,disableInput:this.props.disableInput,showP2PButton:this.state.showP2PButton,showStructuredMenu:this.state.showStructuredMenu,thread:this.state.thread,threadID:this.props.threadID,uploadPhotoFn:function(a){this._photoUploader&&this._photoUploader.uploadFiles([].concat(a))}.bind(this),viewer:this.props.viewer,focusInput:this.focusInput}):b("React").createElement(i,babelHelpers["extends"]({composer:this.props.composer,defaultText:a.text,fileUploader:this.props.fileUploader,fileUploaderProps:this._getFileUploaderProps(),ref:"composer",thread:this.state.thread},this.props,{disableInput:this.props.disableInput,onTextChange:this._onTextChange,p2pProps:this._getP2PProps(),pageID:this.state.pageID,participantIDs:undefined,participants:this.state.participants,photoUploaderProps:this._getPhotoUploaderProps(),showP2PButton:this.state.showP2PButton,showStructuredMenu:this.state.showStructuredMenu,stickerButtonProps:this._getStickerButtonProps()}))},onSend:function(a){var c=this;a&&a.profile_ranges&&a.profile_ranges.length&&(function(){var d=a,e=c.state,f=e.thread,g=e.participants;b("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(a,c){new a().setEvent(c.MENTION).setGroupSize(g&&g.length).setNumDelivered((d.profile_ranges||[]).length).setThreadid(f&&f.thread_id).setThreadType(b("getThreadTypeNameFromThreadType")(f&&f.thread_type)).setOfflineThreadid(d.offline_threading_id).log()},"ChatTabComposerContainer.react")})();k?this._inputRef&&this._inputRef.onSend&&this._inputRef.onSend(a):this.refs.composer&&this.refs.composer.onSend(a)},getInput:function(){return k?this._inputRef:this.refs.composer&&this.refs.composer.getInput()},focusInput:function(){var a=this.getInput();a&&a.focus&&a.focus()},isUploading:function(){return this.refs.composer.isUploading()},_handleSendClick:function(a){a=this.getInput();a&&typeof a.handleSend==="function"&&(a&&a.handleSend())},_getP2PProps:function(){return!this.state.showP2PButton?{}:{button:b("React").createElement("i",{className:"hidden_elem"}),className:"_6ga _6gb",flyoutAlignment:j,referrer:b("MercuryShareAttachmentRenderLocations").CHAT,threadID:this.props.threadID,onTrigger:this.props.onP2PTrigger}},_getStickerButtonProps:function(){var a={className:"_6gb _6gf",flyoutAlignment:j,threadID:this.props.threadID,onStickerSelect:this.props.onStickerSelect};return a},_getPhotoUploaderProps:function(){var a={className:"_6gd",customUI:!0,imageClassName:"hidden_elem",linkClassName:"_6gb _6ge",threadID:this.props.threadID,onLastUploadCancel:this._handleUploadCancel,onAllUploadsComplete:this._handleUploadComplete,onLastUploadFail:this._handlePhotoUploadFail,onUploadError:this._handleUploadError,onSubmit:this._handleUploadSubmit};return a},_getFileUploaderProps:function(){var a=this._getPhotoUploaderProps();a.linkClassName="_6gb _6gg";a.imagesOnly=!1;a.onLastUploadFail=this._handleFileUploadFail;return a},_handleUploadComplete:function(a,c){b("MercuryMessageActions").getForFBID(this.props.viewer).confirmAttachmentPlaceholder(c.upload_id,c),this.props.onUploadComplete&&this.props.onUploadComplete(c)},_handleUploadError:function(a){var b=void 0,c=void 0;switch(a.error){case"size-exceeded":b=h._("Le fichier que vous avez s\u00e9lectionn\u00e9 est trop volumineux");c=h._("Le fichier s\u00e9lectionn\u00e9 est trop volumineux. La taille maximale est 25 Mo.");break;default:b=h._("\u00c9chec de l\u2019importation du fichier"),c=h._("Une erreur est survenue lors de l\u2019import du fichier.")}this._showErrorDialog(b,c);this.props.onFileUploadFail&&this.props.onFileUploadFail(a)},_handleUploadCancel:function(a,c){b("MercuryMessageActions").getForFBID(this.props.viewer).cancelAttachmentPlaceholder(c.upload_id,c),this.props.onUploadCancel&&this.props.onUploadCancel(c)},_handleFileUploadFail:function(a,c){b("MercuryMessageActions").getForFBID(this.props.viewer).cancelAttachmentPlaceholder(c.upload_id,c);a=h._("\u00c9chec de l\u2019importation du fichier");var d=h._("Une erreur est survenue lors de l\u2019import du fichier.");c.errorDialogParams&&(a=c.errorDialogParams.title||a,d=c.errorDialogParams.body||d);this._showErrorDialog(a,d);this.props.onFileUploadFail&&this.props.onFileUploadFail(c)},_handlePhotoUploadFail:function(a,c){b("MercuryMessageActions").getForFBID(this.props.viewer).cancelAttachmentPlaceholder(c.upload_id,c);a=h._("\u00c9chec de l\u2019importation");var d=h._("Veuillez r\u00e9essayer. Assurez-vous de t\u00e9l\u00e9charger un fichier valide.");c.errorDialogParams&&(a=c.errorDialogParams.title||a,d=c.errorDialogParams.body||d);this._showErrorDialog(a,d);this.props.onPhotoUploadFail&&this.props.onPhotoUploadFail(c)},_handleUploadSubmit:function(a,b){this.props.onUploadSubmit&&this.props.onUploadSubmit(b)},_showErrorDialog:function(a,c){b("SimpleXUIDialog").show(c,a)},_handleReplyToMention:function(a,event){event.threadID===this.props.threadID&&b("MercuryParticipants").get(event.participantID,function(a){if(!a||!this.refs.composer||!a.fbid)return;var c=new(b("SearchableEntry"))({uniqueID:b("nullthrows")(a.fbid),title:"@"+a.name});b("setImmediate")(function(){var a=this.refs.composer.getInput?this.refs.composer.getInput():null;a&&a.focus&&a.focus();this.refs.composer.replyToMention&&this.refs.composer.replyToMention(c)}.bind(this))}.bind(this))},_handleInputKeyDown:function(a,b){this.props.inputKeyDown&&this.props.inputKeyDown(a,b)},_handleEscape:function(a){this.props.onEscape&&this.props.onEscape(a)},_handleEmojiSelect:function(a){this._inputRef&&this._inputRef.insertEmoji&&this._inputRef.insertEmoji(a)},_onTextChange:function(a,c){var d=this.props.threadID;d&&(this._setTextImmediate=b("setImmediate")(function(){this._setTextImmediate=null,b("FantaMessageActions").composerTextUpdate(d,a,c)}.bind(this)))}});e.exports=c}),null);
__d("ChatTitleLink.react",["cx","ChatEditParticipantsUtils","Link.react","MercuryThreads","MercuryThreadTitle.react","MessengerAdminGroupUtils","React","TrackingNodes","UserAgent","goURI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MercuryThreads").get();a=b("React").PropTypes;c=b("React").createClass({displayName:"ChatTitleLink",propTypes:{href:a.string,thread:a.object,viewer:a.string},getDefaultProps:function(){return{href:null}},getTitle:function(){return this.refs.threadTitle.getTitle()},render:function(){if(!this.props.thread)return null;var a=this.props,c=a.href,d=a.thread,e=a.viewer;a=babelHelpers.objectWithoutProperties(a,["href","thread","viewer"]);return b("React").createElement(i,babelHelpers["extends"]({className:"titlebarText"+(b("UserAgent").isBrowser("Chrome")&&!b("UserAgent").isPlatform("Windows")?" fixemoji":"")+(c===null?" noLink":""),"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.TITLE),"data-hover":"tooltip",onClick:function(a){return this._handleClick(a)}.bind(this),href:c},a),b("React").createElement(b("MercuryThreadTitle.react"),{ref:"threadTitle",isNewThread:h.isNewEmptyLocalThread(d.thread_id),thread:d,useAndSeparator:!0,useShortName:!d.is_canonical,viewer:e}))},_handleClick:function(a){var c=this.props,d=c.href;c=c.thread;if(!d)return;c&&c.associated_object?b("goURI")(d):b("MessengerAdminGroupUtils").showParticipantsModal(c.is_canonical,h.isEmptyLocalThread(c.thread_id),c)&&(b("ChatEditParticipantsUtils").showParticipantsModal(c.thread_id),a.preventDefault())}});var i=function(a){return a.href?b("React").createElement(b("Link.react"),a):b("React").createElement("span",a)};e.exports=c}),null);
__d("ChatTabHeader.react",["cx","fbt","AutoFocusableLink.react","Bootloader","MercuryBootloadOnInteraction.react","BootloadOnRender.react","ChatCloseButton.react","ChatTitleLink.react","EventPlanExperiment","EventReminderStateStore","FantaTypeComposer","immutable","JSResource","LayerFadeOnHide","LazyComponent.react","LoadOnRender.react","MercuryThreadInfo","MercuryTypingAnimation.react","MessageRequestUtils","MessagingTag","MessengerAdminGroupUtils","MessengerJoinableModeType","React","SimpleNUXMessage","TooltipData","XUIAmbientNUX.react","requireWeak","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j="118809038721180",k=function(a){b("Bootloader").loadModules(["ArchiveWarningReact.bs"],function(b){b=b.jsComponent;return a(b)},"ChatTabHeader.react")},l=b("gkx")("AT7esXHVKl_rB1r5C-zEkmCVhZJMRd4NQJBo-b1EyRH6vUNk2XZEcNJ3WOEvumLbmsR6a_bwkl5o0d60WUY3jm1v");d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(a){i.constructor.call(this,a),this.$1=!1,this.$4=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];this.props.onClick.apply(null,b)}.bind(this),this.$15=function(){return this.refs.menu}.bind(this),this.$16=function(){b("SimpleNUXMessage").markMessageSeenByUser(j),this.setState({eventPlanNuxSeen:!0})}.bind(this),this.state={eventPlanNuxSeen:b("SimpleNUXMessage").hasUserSeenMessage(j)}}a.prototype.componentDidMount=function(){this.$1=!0,b("requireWeak")("ChatVideoCallButton.react",function(a){this.$1&&this.setState({RTCComponent:a})}.bind(this))};a.prototype.componentWillUnmount=function(){this.$1=!1};a.prototype.render=function(){var a=this.$3(),c=this.props.isRaised;return b("React").createElement("div",{className:"_15p4"+(this.props.isRaised?"":" _15p5")+(c||!a?" _2pis":""),onMouseUp:this.$4,ref:"root"},b("React").createElement("div",{"aria-level":"2",className:"titlebarTextWrapper _15p6",role:"heading"},b("React").createElement("div",{className:"_61td",role:c?"presentation":"button",tabIndex:c?-1:0},a,this.$5()),this.props.isTyping&&!this.props.isRaised?b("React").createElement(b("MercuryTypingAnimation.react"),{className:"_15p8",color:"dark"}):null),b("React").createElement("ul",{className:"_32ca"+(l?" _2qi8":"")},this.$6(),b("React").createElement("li",{className:"_32cb"},b("React").createElement(b("ChatCloseButton.react"),{active:this.props.isActive,className:"_3olu _3olv",onClick:this.props.onCloseClick}))))};a.prototype.focus=function(){this.refs.root&&this.refs.root.focus()};a.prototype.$7=function(){return this.props.thread?b("MessageRequestUtils").isMessageRequest(this.props.thread):!1};a.prototype.$6=function(){if(!this.props.isRaised)return null;var a=[this.$8(),this.$9(),this.$10(),this.$11(),this.$12(),this.$13()];return a.filter(Boolean)};a.prototype.$12=function(){return this.$14({isAudio:!0})};a.prototype.$11=function(){return this.$14({isAudio:!1})};a.prototype.$14=function(a){__p&&__p();if(this.props.isEmptyChat||this.$7())return null;var c=this.props,d=c.isGroupChat,e=c.onRTCNuxCloseButtonClick,f=c.rtcNuxShown,g=c.thread,h=c.threadID;c=c.viewer;if(d){if(!g||g.participants.length<=1||!b("MercuryThreadInfo").canReply(g))return null;if(g.joinable_mode&&g.joinable_mode.mode===b("MessengerJoinableModeType").JOINABLE)return null}d=babelHelpers["extends"]({isGroupChat:d,onRTCNuxCloseButtonClick:e,rtcCallData:g&&g.rtc_call_data,rtcNuxShown:f&&a.isAudio,threadID:h,thread:g,viewer:c},a);d.className="_3olv"+(d.isAudio?" _2fpc":"")+(d.isAudio?"":" _2fpd");e=this.state.RTCComponent;return b("React").createElement("li",{className:"_3a61"+(d.isAudio?" _461a":"")+(d.isAudio?"":" _461b"),key:"rtc"+(d.isAudio?"audio":"video")},e?b("React").createElement(e,d):b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),d),loader:b("JSResource")("ChatVideoCallButton.react").__setRef("ChatTabHeader.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:d.className,role:"button"})}))};a.prototype.$13=function(){__p&&__p();var a=this.props.thread;if(this.props.isEmptyChat||!!a&&a.folder===b("MessagingTag").PENDING)return null;a=babelHelpers["extends"]({attachmentsShelf:this.props.attachmentsShelf,composer:this.props.composer,isEmptyChat:this.props.isEmptyChat,isGroupChat:this.props.isGroupChat,isMultiCompany:this.props.isMultiCompany,isMuted:this.props.isMuted,isPageChat:this.props.isPageChat,membershipParticipants:this.props.membershipParticipants,nameConversationFunc:this.props.nameConversationFunc,otherUserID:this.props.otherUserID,participants:this.props.participants,sheetController:this.props.sheetController,showAddFriend:this.props.showAddFriend,thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer},this.props.additionalMenuProps);a.className="_3olv _1ll-";var c=h._("Options"),d=!1;if(this.props.threadID){var e=b("EventReminderStateStore").getEvent(this.props.threadID);d=e&&!e.exists&&!this.state.eventPlanNuxSeen&&b("EventPlanExperiment").shouldShowEntryPointNuxWithExposure()}return b("React").createElement("div",{key:"menu"},b("React").createElement("li",{className:"_3a61 _461_",ref:"menu"},b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),a),loader:b("JSResource")("ChatTabMenu.react").__setRef("ChatTabHeader.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:a.className,"aria-label":c,role:"button"})})),b("React").createElement(b("XUIAmbientNUX.react"),{alignment:"right",behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},contextRef:this.$15,onCloseButtonClick:this.$16,shown:d,width:"auto"},h._("Cliquez ici pour d\u00e9marrer un autre projet.")))};a.prototype.$10=function(){if(this.props.isPageChat||this.props.isEmptyChat||this.props.isMultiCompany&&!this.props.isGroupChat||this.$7())return null;var a={className:"_3olv _3jyj",isFBAtWork:this.props.isWorkUser,shouldAddToApprovalQueue:b("MessengerAdminGroupUtils").shouldAddToApprovalQueue(this.props.thread,this.props.viewer),shown:!0,onClick:function(){return this.props.sheetController.openAddFriendsSheet()}.bind(this)},c=h._("Ajouter");return b("React").createElement("li",{className:"_3a61 _4620",key:"add"},b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),a),loader:b("JSResource")("ChatAddToThreadButton.react").__setRef("ChatTabHeader.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{"aria-label":c,className:a.className,role:"button"})}))};a.prototype.$8=function(){if(!this.props.isViewerEmployee)return null;var a=this.props.participants;a=a?a.length>0&&a.every(function(a){return!!(a&&a.employee)}):!1;return!a?null:b("React").createElement("li",{key:"archiveWarning"},b("React").createElement(b("LoadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{shown:!0}),loader:k,placeholder:b("React").createElement("div",null)}))};a.prototype.$9=function(){if(!this.props.isWorkUser||!this.props.isMultiCompany)return null;var a=h._("Discussion inter-entreprise");return b("React").createElement("li",{key:"multiCompanyBadge"},b("React").createElement("div",{className:"_3olv"},b("React").createElement(b("AutoFocusableLink.react"),babelHelpers["extends"]({className:"_kp6",onClick:this.props.onClick,lable:a,role:"presentation"},b("TooltipData").propsFor(a,"above")))))};a.prototype.$17=function(){return b("React").createElement("span",{className:"_3a61"+(this.props.isRaised?"":" _3-99")},b("React").createElement("span",{className:"_3olv _2nlt"}))};a.prototype.$5=function(){return b("React").createElement(b("ChatTitleLink.react"),babelHelpers["extends"]({href:this.props.isRaised?this.props.href:undefined,thread:this.props.thread,viewer:this.props.viewer},b("TooltipData").propsFor(this.props.tooltip,"above")))};a.prototype.$3=function(){var a=this.props,c=a.isRaised;a=a.thread;return!c&&a&&a.unread_count>0?b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:"_3-8_ _3-99",count:a.unread_count,type:"special"}),loader:b("JSResource")("XUIBadge.react").__setRef("ChatTabHeader.react"),placeholder:b("React").createElement("span",null)}):this.$17()};a.propTypes={additionalMenuProps:c.object,attachmentsShelf:c.object.isRequired,composer:c.object,href:c.string,isActive:c.bool.isRequired,isEmptyChat:c.bool,isGroupChat:c.bool,isMuted:c.bool,isPageChat:c.bool,isRaised:c.bool,isTyping:c.bool,isViewerEmployee:c.bool,isWorkUser:c.bool,nameConversationFunc:c.func.isRequired,onClick:c.func.isRequired,onCloseClick:c.func.isRequired,onRTCNuxCloseButtonClick:c.func.isRequired,otherUserID:c.string,participants:c.arrayOf(c.object),rtcNuxShown:c.bool.isRequired,sheetController:c.object.isRequired,showAddFriend:c.func.isRequired,thread:c.object,threadID:c.string,tooltip:c.string,viewer:c.string.isRequired};e.exports=a}),null);
__d("getGroupNameTooltipFromParticipantIDs",["fbt","MercuryParticipants","MercuryViewer"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=10,i="\n";function a(a,c){__p&&__p();var d=[],e=b("MercuryViewer").getID();a=a&&a.filter(function(a){return a!==e});if(!a||!a.length){c(null);return}var f=a.length,j=f-h;j>1&&(a=a.slice(0,h));b("MercuryParticipants").getMulti(a,function(a){for(var b in a){var e=a[b];d.push(e.name)}if(j>1){e=g._("et {number of hidden chat participants} autres.",[g._param("number of hidden chat participants",j)]);d.push(e)}c(d.join(i))})}function c(a){__p&&__p();var c=[],d=b("MercuryViewer").getID();a=a&&a.filter(function(a){return a!==d});if(!a||!a.length)return null;c=a.map(function(a){a=b("MercuryParticipants").getOrFetch(a);return a&&a.name}).filter(function(a){return!!a});a=a.length-(a.length-c.length)-h;if(a>1){c=c.slice(0,h);a=g._("et {number of hidden chat participants} autres.",[g._param("number of hidden chat participants",a)]);c.push(a)}return c.join(i)}e.exports={getGroupNameTooltipFromParticipantIDs:c,getGroupNameTooltipFromParticipantIDsAsync:a}}),null);
__d("getTitleHrefFromThreadID",["MercuryIDs","MercuryParticipants","WebMessengerThreadPermalinks"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){if(b("MercuryIDs").isLocalThread(a)){c();return}var d=b("MercuryIDs").getUserIDFromThreadID(a);d?b("MercuryParticipants").get(b("MercuryIDs").getParticipantIDFromUserID(d),function(a){a.href?c(a.href):c(b("WebMessengerThreadPermalinks").getThreadURIFromUserID(d))}):b("WebMessengerThreadPermalinks").getThreadURI(a,c)}e.exports=a}),null);
__d("ChatTabHeaderContainer.react",["ChatTabHeader.react","CurrentUser","FantaTypeComposer","immutable","MercuryIDs","MercuryParticipants","MercuryThreadInfo","MercuryThreads","React","SubscriptionsHandler","WorkModeConfig","getPageIDFromThreadID","getGroupNameTooltipFromParticipantIDs","getTitleHrefFromThreadID"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("getGroupNameTooltipFromParticipantIDs").getGroupNameTooltipFromParticipantIDs;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);g=d&&d.prototype;function a(a){g.constructor.call(this,a),this.$1=new(b("SubscriptionsHandler"))(),this.$2=null,this.state=this.calculateState(a)}a.prototype.calculateState=function(a){__p&&__p();var c=!1,d=!0,e=!1,f=void 0,g=void 0,i=[],j=[],k=void 0,l=void 0;if(a.threadID){var m=b("MercuryThreads").getForFBID(a.viewer);k=m.getOrFetch(a.threadID);c=b("MercuryIDs").isGroupChat(a.threadID);d=m.isNewEmptyLocalThread(a.threadID);e=!!k&&b("MercuryThreadInfo").isMuted(k);f=b("MercuryIDs").getUserIDFromThreadID(a.threadID);g=b("getPageIDFromThreadID")(a.threadID);k&&(k.participants.forEach(function(a){var c=b("MercuryParticipants").getNow(a);i.push(c);c||j.push(a)}),l=h(k.participants))}this.$2&&this.$2.remove();j.length>0&&(this.$2=b("MercuryParticipants").getMulti(j,function(a){this.$2=null,k&&this.setState({participants:k.participants.map(function(a){return b("MercuryParticipants").getNow(a)})})}.bind(this)));m=this.state&&this.state.additionalMenuProps||{};a&&(m=babelHelpers["extends"]({},m,a.additionalMenuProps));return{additionalMenuProps:m,isEmptyChat:d,isGroupChat:c,isMuted:e,otherUserID:f,pageID:g,participants:i,thread:k,tooltip:l}};a.prototype.UNSAFE_componentWillMount=function(){this.$1.addSubscriptions(b("MercuryThreads").addListener("change",function(){this.setState(this.calculateState(this.props))}.bind(this)))};a.prototype.componentDidMount=function(){this.$3(),this.props.onMount&&this.props.onMount(this)};a.prototype.UNSAFE_componentWillReceiveProps=function(a){a.threadID!==this.props.threadID&&this.$3(),this.setState(this.calculateState(a))};a.prototype.componentWillUnmount=function(){this.$1.release(),this.$2&&this.$2.remove()};a.prototype.render=function(){return b("React").createElement(b("ChatTabHeader.react"),{additionalMenuProps:this.state.additionalMenuProps,attachmentsShelf:this.props.attachmentsShelf,composer:this.props.composer,href:this.state.href,isActive:this.props.isActive,isEmptyChat:this.state.isEmptyChat,isGroupChat:this.state.isGroupChat,isMultiCompany:this.props.isMultiCompany,isMuted:this.state.isMuted,isPageChat:!!this.state.pageID,isRaised:this.props.isRaised,isTyping:this.props.isTyping,isViewerEmployee:b("CurrentUser").isEmployee(),isWorkUser:!!b("WorkModeConfig").is_work_user,membershipParticipants:this.props.membershipParticipants,nameConversationFunc:this.props.nameConversationFunc,onClick:this.props.onClick,onCloseClick:this.props.onCloseClick,onRTCNuxCloseButtonClick:this.props.onRTCNuxCloseButtonClick,otherUserID:this.state.otherUserID,participants:this.state.participants,ref:"header",rtcNuxShown:this.props.rtcNuxShown,sheetController:this.props.sheetController,showAddFriend:this.props.showAddFriend,thread:this.state.thread,threadID:this.props.threadID,tooltip:this.state.tooltip,viewer:this.props.viewer})};a.prototype.focus=function(){this.refs.header.focus()};a.prototype.setAdditionalMenuProps=function(a){a=babelHelpers["extends"]({},this.state.additionalMenuProps,a);this.setState({additionalMenuProps:a})};a.prototype.$3=function(){b("getTitleHrefFromThreadID")(this.props.threadID,function(a){return this.setState({href:a})}.bind(this))};a.propTypes={additionalMenuProps:c.object,attachmentsShelf:c.object.isRequired,composer:c.object,isActive:c.bool.isRequired,isRaised:c.bool,isTyping:c.bool,nameConversationFunc:c.func.isRequired,onClick:c.func.isRequired,onCloseClick:c.func.isRequired,onMount:c.func,onRTCNuxCloseButtonClick:c.func.isRequired,rtcNuxShown:c.bool.isRequired,sheetController:c.object.isRequired,showAddFriend:c.func.isRequired,threadID:c.string,viewer:c.string.isRequired};e.exports=a}),null);
__d("XGroupCallNuxController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groupcall/nux/",{action:{type:"String",required:!0}})}),null);
__d("FantaChatHeaderContainer.react",["cx","AsyncRequest","BootloadOnRender.react","ChatTabHeaderContainer.react","FantaTabActions","FantaTabSheetActions","FantaTypeComposer","JSResource","LazyComponent.react","immutable","MercuryConfig","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryParticipants","MercuryThreadInfo","MercuryThreads","MessageRequestUtils","React","XGroupCallNuxController","gkx","isEmpty"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MercuryThreads").get();c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=!1,this.state={rtcNuxShown:!1},this.$5=function(){var a=this.props.threadID;b("FantaTabSheetActions").openAddMoreFriendsSheet(a)}.bind(this),this.$4=function(){var a=this.props.threadID;b("FantaTabSheetActions").openNameConversationSheet(a)}.bind(this),this.$6=function(){var a=this.props.threadID;b("FantaTabSheetActions").openAddMoreFriendsSheet(a)}.bind(this),this.$8=function(){this.props.onClose&&this.props.onClose()}.bind(this),this.$7=function(event){this.$3();var a=event.target;if(!a)return;(a.getAttribute("role")==="presentation"||a.classList&&(a.classList.contains("_15p6")||a.classList.contains("_2nlt")||a.classList.contains("_14lt")))&&(event.preventDefault(),b("FantaTabActions").minimizeTab(this.props.threadID))}.bind(this),this.$3=function(){if(this.state.rtcNuxShown&&this.$1){this.setState({rtcNuxShown:!1});var a=b("XGroupCallNuxController").getURIBuilder().setString("action","dismiss").getURI();new(b("AsyncRequest"))(a).send()}}.bind(this),c}a.prototype.shouldComponentUpdate=function(a,b){var c=this.props,d=this.state;return c.viewer!==a.viewer||c.threadID!==a.threadID||c.isLastGroupTab!==a.isLastGroupTab||c.thread!==a.thread||d.rtcNuxShown!==b.rtcNuxShown||c.customColor!==a.customColor||c.blockedIDs!==a.blockedIDs||!c.membershipParticipants&&!!a.membershipParticipants||!!c.membershipParticipants&&!!a.membershipParticipants&&!c.membershipParticipants.equals(a.membershipParticipants)};a.prototype.componentDidMount=function(){this.$1=!0,this.$2()};a.prototype.componentWillUnmount=function(){this.$3(),this.$1=!1};a.prototype.render=function(){var a=this.props,c=a.isFocused,d=a.thread,e=a.threadID,f=a.viewer;a=a.customColor;var g=this.state.rtcNuxShown,h=!!d&&b("MercuryThreadInfo").isMuted(d),j=b("MercuryIDs").getParticipantIDFromFromThreadID(e);j=j?b("MercuryParticipants").getNow(j):null;var k=j&&j.is_business_enabled,l=d&&b("MercuryThreadInfo").showComposer(d)&&!b("isEmpty")(d.participants)&&!b("MessageRequestUtils").isMessageRequest(d)&&!b("MercuryConfig").ViewerIsReadOnly&&!(b("MercuryConfig").ColdOpenBlock&&(b("MercuryThreadInfo").isColdOpen(d)||b("MercuryThreadInfo").isEmptyLocalThread(d))),m=d&&b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(this.props.viewer,this.props.blockedIDs,d),n=i.isNewEmptyLocalThread(e),o=d&&d.message_count===0;m={hasMessageBlocked:m,isBusinessEnabled:k,isEmptyChat:n,isEmptyConversation:o,isMuted:h,show:l};k=a?{color:a}:null;return b("gkx")("AT6A1bnDK2h8UfK21QtwMasCKSCRuJLNl1CkXiFlb4ngyuzOTwnMPylW45yiU1EwI4xsY2mbtMRkoGbbra-xak0V")?b("React").createElement("div",{className:"clearfix titlebar"},b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{isActive:!1,thread:d,viewer:f,viewerParticipant:j}),loader:b("JSResource")("FantaM4HeaderLoader.react").__setRef("FantaChatHeaderContainer.react"),placeholder:b("React").createElement("div",null)})):b("React").createElement("div",{className:"clearfix fbNubFlyoutTitlebar titlebar"+(a?" _1m34":""),style:k},b("React").createElement(b("ChatTabHeaderContainer.react"),{composer:this.props.composer,additionalMenuProps:m,attachmentsShelf:document.createElement("div"),isActive:c,isRaised:!0,isTyping:!1,nameConversationFunc:this.$4,rtcNuxShown:g,sheetController:{openAddFriendsSheet:this.$5},showAddFriend:this.$6,threadID:e,viewer:f,onClick:this.$7,onCloseClick:this.$8,onRTCNuxCloseButtonClick:this.$3,isMultiCompany:this.props.isMultiCompany,membershipParticipants:this.props.membershipParticipants}))};a.prototype.$9=function(a){return a.length>0&&a.every(function(a){a=b("MercuryParticipants").getNow(a);return!!(a&&a.employee)})};a.prototype.$2=function(){if(this.props.isLastGroupTab){var a=b("XGroupCallNuxController").getURIBuilder().setString("action","should_show").getURI();new(b("AsyncRequest"))(a).setHandler(function(a){a=a.payload.shouldShow;this.$1&&this.setState({rtcNuxShown:a})}.bind(this)).send()}};a.propTypes={blockedIDs:c.instanceOf(Set).isRequired,customColor:c.string,isFocused:c.bool.isRequired,isLastGroupTab:c.bool.isRequired,onClose:c.func.isRequired,thread:c.object,threadID:c.string.isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("FantaConversation.react",["Bootloader","ChatConversation.react","CurrentUser","EventProfiler","MercuryIDs","MessengerHotLikePreviewEvents","React","StickerInterfaces","StickersTypedLogger","SubscriptionsHandler","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(a){g.constructor.call(this,a),this.$4=function(a){this.props.threadID===a&&this.setState({likePreview:null})}.bind(this),this.$5=function(a,c){if(!a)return;new(b("StickersTypedLogger"))().setEvent("click_sticker").setPackid(a).setStickerid(c).log();b("Bootloader").loadModules(["StickersPackInTray","StickersActions","StickersStoreController"],function(c,d,e){c.onIsPackInTray(a,b("StickerInterfaces").MESSAGES,function(b){b.in_sticker_tray?(d.selectTrayPack(a),d.showStickerFlyout(this.props.threadID)):e.showStore(a)}.bind(this))}.bind(this),"FantaConversation.react")}.bind(this),this.state={likePreview:null},this.$1=new(b("SubscriptionsHandler"))()}a.prototype.shouldComponentUpdate=function(a,b){var c=this.props,d=this.state;return!c.onlineUsers.equals(a.onlineUsers)||!c.messages.equals(a.messages)||c.threadID!==a.threadID||c.thread!==a.thread||d.likePreview!==b.likePreview};a.prototype.componentDidMount=function(){this.$2(),this.$3()};a.prototype.componentDidUpdate=function(){this.$3()};a.prototype.componentWillUnmount=function(){this.$1.release()};a.prototype.$3=function(){b("EventProfiler").informManualInteractionTimestamp(["MessageJewelListItem","ChatSideBarLink"],!0,"click")};a.prototype.$2=function(){this.$1.addSubscriptions(b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(a,b){this.props.threadID===b&&this.setState({likePreview:a})}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP,this.$4),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP_EMOJI,this.$4),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").REMOVE,this.$4))};a.prototype.render=function(){var a=this.props.messages,c=this.props,d=c.onLoadMoreMessages,e=c.thread;c=c.threadID;var f=this.state.likePreview,g=b("CurrentUser").getID();f&&(a=a.push(f));return e?b("React").createElement(b("ChatConversation.react"),{isCanonical:b("MercuryIDs").isCanonical(c),loadMoreMessages:d,maxBubbleWidth:181-this.props.scrollbarPadding,messages:a,onAttachmentLoad:function(){return this.props.onAttachmentLoad()}.bind(this),onMount:b("emptyFunction"),onStickerClick:this.$5,onlineUsers:this.props.onlineUsers,readReceipts:this.props.readReceipts,ref:"conversation",thread:e,threadID:c,viewer:g}):b("React").createElement("div",null)};a.prototype.getMessageList=function(){return this.refs.conversation&&this.refs.conversation.getMessageList()};a.propTypes={messages:c.object.isRequired,onLoadMoreMessages:c.func.isRequired,onlineUsers:c.object.isRequired,scrollbarPadding:c.number,thread:c.object,threadID:c.string.isRequired};e.exports=a}),null);
__d("FantaPageGreetingLoader.react",["cx","BootloadOnRender.react","JSResource","LazyComponent.react","React","getPageIDFromThreadID","idx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){var c=a.thread;a=a.threadID;if(c!=null){c=((c=c)!=null?c.is_canonical_neo_user:c)||!1;if(c)return null}else return null;return b("getPageIDFromThreadID")(a)?b("React").createElement("div",{className:"_av1"},b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MercuryChatTabPagesGreetingContainer.react").__setRef("FantaPageGreetingLoader.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:a})})):null};e.exports=a}),null);
__d("MercuryCamQuickReply.react",["cx","fbt","BootloadedComponent.react","JSResource","MercuryIDs","MercuryThreads","MessengerQuickCamOrigins","React","XUISpinner.react","convertMIGColorToFIGColor"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MercuryThreads").get();c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.UNSAFE_componentWillUpdate=function(a,b){a&&this.props.lastMessage!==a.lastMessage&&this.props.camQuickReplyWillShow&&this.props.camQuickReplyWillShow()};a.prototype.componentDidUpdate=function(a,b){a&&this.props.lastMessage!==a.lastMessage&&this.props.camQuickReplyDidShow&&this.props.camQuickReplyDidShow()};a.prototype.render=function(){var a=this.props.lastMessage,c=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer);if(!(a&&a.message_source&&a.author!==c&&a.message_source==="camera"))return null;c=j.getThreadMetaNow(this.props.threadID);a=c?b("convertMIGColorToFIGColor")(c.custom_color):null;c=b("React").createElement("div",{className:"_zdf",style:a&&{color:a}},h._("Envoyer une r\u00e9ponse photo"));return b("React").createElement("div",{className:"_zdg"},b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerQuickCamButtonHTML5.react").__setRef("MercuryCamQuickReply.react"),bootloadPlaceholder:b("React").createElement(b("XUISpinner.react"),{className:"_5h-9"}),className:"_5yhk _6gb",location:b("MessengerQuickCamOrigins").CHAT_TAB,threadID:this.props.threadID,viewer:this.props.viewer,textChild:c}))};function a(){i.apply(this,arguments)}a.propTypes={camQuickReplyWillShow:c.func,camQuickReplyDidShow:c.func,lastMessage:c.object,threadID:c.string.isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("MercuryLastMessageIndicator.react",["cx","fbt","CurrentUser","MercuryIDs","MercuryMessageSourceTags","MercuryParticipants","MercuryThreads","MercuryViewer","MessengerReadReceipt.bs","MessengerTextWithEmoticons.react","React","ReactDOM","immutable","SubscriptionsHandler","TooltipData","WorkModeConfig","emptyFunction","gkx","formatDate","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=b("MercuryThreads").get(),k=b("immutable").Set;c=b("React").PropTypes;var l=function(a,c,d){a=b("MessengerReadReceipt.bs").getSeenTimestamp(a,d,c[0]);d=a.action*.001;return{seenTimestamp:d,seenByData:null}},m=function(a,c,d){__p&&__p();var e={};for(var f=a,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;e[i]=b("MercuryParticipants").getNow(i)}i=j.getThreadMetaNow(c);h=null;i&&i.custom_nickname&&(h=i.custom_nickname);g={};for(var f=Object.keys(e),c=Array.isArray(f),k=0,f=c?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(c){if(k>=f.length)break;l=f[k++]}else{k=f.next();if(k.done)break;l=k.value}l=l;var m=e[l],n;void 0;!m?n=b("MercuryParticipants").getDefaultName():(n=m.short_name,h&&h[m.fbid]&&(n=h[m.fbid]));g[l]=n}m=void 0;l=!1;n=!1;o(a,d,i)?n=!0:a.length==1?m=" "+g[a[0]]:a.length==2?m=" "+g[a[0]]+", "+g[a[1]]:a.length==3?m=" "+g[a[0]]+", "+g[a[1]]+", "+g[a[2]]:a.length>3&&(m=" "+g[a[0]]+", "+g[a[1]]+", ",l=!0);return{seenTimestamp:null,seenByData:{seenByAll:n,text:m,showTooltip:l,seenBy:a}}},n=function(a,c,d){d=b("MessengerReadReceipt.bs").getSeenBy(a,d,!0);if(d.length===0)return{seenTimestamp:null,seenByData:null};var e=b("MercuryIDs").getUserIDFromThreadID(c);if(e)return l(a,d,c);else return m(d,c)},o=function(a,c,d){var e=d?d.participants.length:0;a=a.length;c&&c.author!=b("MercuryViewer").getID()&&(!d||d.participants.indexOf(c.author)>-1)&&a++;return e>2&&a>=e-1};d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={seenTimestamp:null,seenByData:null},b}a.getDerivedStateFromProps=function(a,b){"use strict";return n(a.readReceipts,a.threadID,a.lastMessage)};a.prototype.shouldComponentUpdate=function(a,b){"use strict";__p&&__p();if(a.threadID!==this.props.threadID||a.lastMessage!==this.props.lastMessage||a.isTyping!==this.props.isTyping||a.readReceipts!==this.props.readReceipts||b.seenTimestamp!==this.state.seenTimestamp)return!0;a=this.state.seenByData;b=b.seenByData;if(!a&&!b)return!1;if(!a||!b)return!0;if(a.seenByAll!==b.seenByAll||a.showTooltip!==b.showTooltip||a.text!==b.text)return!0;return!k(a.seenBy).equals(k(b.seenBy))?!0:!1};a.prototype.componentDidUpdate=function(){"use strict";if(!this.isVisible())return;this.props.indicatorDidShow&&this.props.indicatorDidShow()};a.prototype.componentWillUnmount=function(){"use strict";this.$1&&this.$1.release()};a.prototype.$2=function(){"use strict";return!this.props.lastMessage?[]:this.props.lastMessage.source_tags||this.props.lastMessage.tags||[]};a.prototype.$3=function(){"use strict";if(this.props.isTyping)return b("React").createElement("div",{className:this.$4([])},b("React").createElement("div",{className:"_510h"}),b("React").createElement("span",{className:"_510f",ref:"text"},"\xa0"));var a=this.$2(),c=this.state.seenByData,d=this.state.seenTimestamp;if(c)return b("React").createElement("div",{className:this.$4(a)},b("React").createElement("div",{className:"_510h"}),b("React").createElement("span",{className:"_510f"},this.$5(c)));else if(d)return b("React").createElement("div",{className:this.$4(a)},b("React").createElement("div",{className:"_510h"}),b("React").createElement("span",{className:"_510f",ref:"text"},this.$6(d)));else return b("React").createElement("div",{className:this.$4(a)},b("React").createElement("div",{className:"_510h"}),b("React").createElement("span",{className:"_510f",ref:"text"},this.$7(a)))};a.prototype.render=function(){"use strict";if(!b("CurrentUser").isWorkUser()&&b("gkx")("AT4vZBWyiZL1KZrir2lJt4vVNMIYu8sDbA3PtNwJWZh5seJSYZeYdmCgqH3wgiUS4PfslnEPm3wz9jSsjDINBCSy"))return b("React").createElement("div",{className:"_4gd0"},this.$3());else return this.$3()};a.prototype.$6=function(a){"use strict";var c=Date.now()*.001,d=void 0;a<c-518400?d="M j":a<c-86400?d="D g:ia":d="g:ia";return h._("Vu\u00a0: {timestamp}",[h._param("timestamp",b("formatDate")(a,d))])};a.prototype.$7=function(a){"use strict";__p&&__p();if(a.includes(b("MercuryMessageSourceTags").MESSENGER))if(!b("WorkModeConfig").is_work_user)return b("React").createElement("a",{href:"/mobile/messenger",className:"fcg",target:"_blank"},h._("Envoy\u00e9 depuis Messenger"));else return b("React").createElement("a",{href:"https://www.facebook.com/workplace/mobile/",className:"fcg",target:"_blank"},h._("Envoy\u00e9 depuis Workplace Chat"));else if(a.includes(b("MercuryMessageSourceTags").MOBILE)){var c=b("WorkModeConfig").is_work_user?"/workplace/mobile":"/mobile";return b("React").createElement("a",{href:c,className:"fcg",target:"_blank"},h._("Envoy\u00e9 depuis un mobile"))}else if(a.includes(b("MercuryMessageSourceTags").EMAIL))return b("React").createElement("span",null,h._("Envoy\u00e9 par e-mail"));return null};a.prototype.$4=function(a){"use strict";var c=this.props.lastMessage&&this.props.lastMessage.author&&b("MercuryViewer").isViewer(this.props.lastMessage.author);c="_510g"+(c?" _510e":"");var d=null;this.props.isTyping?d=null:this.state.seenByData!==null||this.state.seenTimestamp!==null?d="seen":a.includes(b("MercuryMessageSourceTags").MESSENGER)||a.includes(b("MercuryMessageSourceTags").MOBILE)?d="sentFromMobile":a.includes(b("MercuryMessageSourceTags").EMAIL)&&(d="sentFromEmail");return b("joinClasses")(c,d)};a.prototype.isVisible=function(){"use strict";var a=this.$2();return a.includes(b("MercuryMessageSourceTags").MESSENGER)||a.includes(b("MercuryMessageSourceTags").MOBILE)||a.includes(b("MercuryMessageSourceTags").EMAIL)?!0:this.state.seenTimestamp!==null||this.state.seenByData!==null};a.prototype.$5=function(a){"use strict";__p&&__p();var c=a.seenByAll;if(c)return h._("Vu par tout le monde");c=a.text;if(!c)return null;c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoji:!0,renderEmoticons:!0,text:c});var d=a.showTooltip;if(!d)return h._("Vu par {names}",[h._param("names",c)]);else{d=this.$8(a);return h._("Vu par {names}{=num more link}",[h._param("names",c),h._param("=num more link",d)])}};a.prototype.$8=function(a){"use strict";__p&&__p();if(!a.text||!a.showTooltip)return null;var c={},d=0,e=null;b("MercuryParticipants").getMulti(a.seenBy,function(b){e=a.seenBy.map(function(a){return b[a].name}).join("\r\n"),d=Object.keys(b).length-2});c=Object.assign({"data-tooltip-alignh":"center"},b("TooltipData").propsFor(e,"above"));var f=h._({"*":"{num} autres"},[h._param("num",d,[0])]);return b("React").createElement("span",babelHelpers["extends"]({className:"more"},c),f)};a.propTypes={indicatorDidShow:c.func,lastMessage:c.object,readReceipts:c.object,threadID:c.string.isRequired,isTyping:c.bool.isRequired};a.defaultProps={indicatorDidShow:b("emptyFunction")};e.exports=a}),null);
__d("MercuryQuickReply.react",["cx","BootloadedComponent.react","JSResource","MercuryIDs","MessengerQuickCamOrigins","MessengerViewerContactMethodsWebGraphQLQuery","React","WebGraphQL","XUISpinner.react","gkx","idx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={viewerEmail:null,viewerPhone:null},b}a.prototype.componentDidMount=function(){this.$1(this.props.lastMessage)!==null&&this.props.quickReplyDidShow()};a.prototype.componentDidUpdate=function(a){this.$1(this.props.lastMessage)!==null&&this.$1(a.lastMessage)===null&&this.props.quickReplyDidShow(),this.$2(this.props.lastMessage)};a.prototype.render=function(){__p&&__p();var a=this.props.lastMessage,c=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer);if(!a||a.author===c)return null;c=this.$1(a);if(Array.isArray(c)){var d=c.every(function(a){return a.content_type==="user_email"&&this.state.viewerEmail===null||a.content_type==="user_phone_number"&&this.state.viewerPhone===null}.bind(this));if(!d)return b("React").createElement("div",{className:"_419m"},b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerBotsQuickReplyButtonList.react").__setRef("MercuryQuickReply.react"),bootloadPlaceholder:b("React").createElement(b("XUISpinner.react"),{className:"_5h-9"}),isSponsored:a.is_sponsored,messageId:a.message_id,options:c,pageId:b("MercuryIDs").getUserIDFromParticipantID(a.author),threadID:a.thread_id,quickCamOriginLocation:this.props.quickCamOriginLocation,viewer:this.props.viewer,viewerEmail:this.state.viewerEmail,viewerPhone:this.state.viewerPhone}))}return null};a.prototype.$1=function(a){a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);return Array.isArray(a&&a.quick_replies)?a&&a.quick_replies:null};a.prototype.$2=function(a){__p&&__p();a=this.$1(a);if(!a||a.length===0)return;a.some(function(a){return a.content_type==="user_email"||a.content_type==="user_phone_number"})&&b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerViewerContactMethodsWebGraphQLQuery"))({})),function(a){var b;b=(b=a)!=null?(b=b.viewer)!=null?(b=b.user)!=null?b.all_phones:b:b:b;a=(a=a)!=null?(a=a.viewer)!=null?a.all_emails:a:a;var c=b?b.find(function(a){return a.is_preferred}):null;!c&&b&&(c=b[0]);b=a?a.find(function(a){return a.is_primary}):null;this.setState({viewerEmail:(a=b)!=null?a.display_email:a,viewerPhone:(b=c)!=null?(b=b.phone_number)!=null?b.universal_number:b:b})}.bind(this))};a.propTypes={quickReplyDidShow:c.func.isRequired,lastMessage:c.object,quickCamOriginLocation:c.oneOf(b("MessengerQuickCamOrigins").getValues()).isRequired,threadID:c.string.isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("FantaConversationScroller.react",["cx","fbt","Animation","Arbiter","BootloadedComponent.react","Bootloader","ChatTypingIndicatorsWrapper.react","CurrentUser","Event","FantaConversation.react","FantaPageGreetingLoader.react","FantaTabActions","ChatThread","Grid.react","immutable","JSResource","MercuryLastMessageIndicator.react","MercuryAttachment","MercuryCamQuickReply.react","MercuryConfig","MercuryIDs","MercuryQuickReply.react","MercuryThreads","MessengerHotLikePreviewEvents","MessengerQuickCamOrigins","MessengerVideoAutoplayActions","MessengerVideoAutoplayStore","React","ReactDOM","MercuryShareAttachmentRenderLocations","Scroll","ScrollBoundaryContain","Style","SubscriptionsHandler","TimeSlice","XUISpinner.react","clearImmediate","emptyFunction","getElementPosition","getPageIDFromThreadID","gkx","isEventSupported","setImmediate","setTimeoutAcrossTransitions","clearTimeout","throttle"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("ChatThread").ChatThread,k=b("MercuryThreads").get(),l=b("Grid.react").GridItem;c=b("React").PropTypes;var m=15,n=null,o=20,p=1e3,q=100;function r(a){__p&&__p();if(n===null){var c=a.firstElementChild;if(c){b("Style").set(a,"overflow","scroll");var d=c.clientWidth;b("Style").set(a,"overflow","hidden");c=c.clientWidth;n=Math.max(c-d,0);b("Style").set(a,"overflow","")}else n=0}return n}d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(a){__p&&__p();i.constructor.call(this,a),this.$9=[],this.state={loadingMessages:!k.isEmptyLocalThread(this.props.threadID),scrollbarPadding:n===null?m:n,hideLastMessageIndicator:!1},this.$21=function(a){a=b("ReactDOM").findDOMNode(this.refs.scrollContainer);a&&(this.$22(),this.$23()&&!this.$24()&&!this.$3&&!this.props.hasFetchedAll&&(this.setState({loadingMessages:!0}),this.props.onLoadMoreMessages()),this.$25(),this.$12())}.bind(this),this.$17=function(){__p&&__p();if(!this.refs||this.state.loadingMessages||!this.props.thread){this.$9=[];return}var a=b("ReactDOM").findDOMNode(this.refs.scrollContainer),c=b("getPageIDFromThreadID")(this.props.threadID);if(!a||!c){this.$9=[];return}var d=10,e=void 0,f=void 0;try{e=a.getBoundingClientRect(),f=this.refs.conversation?this.refs.conversation.getMessageList():null}catch(a){return}if(!f||!e)return;var g=[];this.$8.forEach(function(a){if(!f)return;var h=a.message_id,i=f.getMessageElement(h);if(i){i=i.getBoundingClientRect();i.top>e.top-d&&i.bottom<e.bottom+d&&(g.push(h),this.$9.includes(h)||b("Bootloader").loadModules(["MessengerAdsWebLogger","MNAdsLoggerEventEnum"],function(b,d){b.log(a.ad_client_token,a.ad_id,d.MESSAGE_SEEN_THREAD,!0,h,c)},"FantaConversationScroller.react"))}}.bind(this),this);this.$9=g}.bind(this),this.$26=function(){this.$11&&(b("clearTimeout")(this.$11),delete this.$11);var a=this.$10;this.$24()?(this.$27(!1),this.$10=!0):this.$10=!1;a!==this.$10&&b("FantaTabActions").scrollBottomChanged(this.props.threadID,this.$10,this.$28)}.bind(this),this.$29=function(){this.$11&&b("clearTimeout")(this.$11),this.$11=b("setTimeoutAcrossTransitions")(this.$26,q)}.bind(this),this.$30=function(){this.$1=null,b("FantaTabActions").scrollBottomChanged(this.props.threadID,this.$6,this.$28)}.bind(this),this.$28=function(){b("gkx")("AT5Tksg1z1eIa6YmOH92o0v-zwCN16C1uxMcqW4ABgK3zj0WXDYLwN8d-MFrMPsR3UdYLnPnjw9H3yKbwAuQAAWx")?this.$18():(this.$27(!1),this.$19())}.bind(this),this.$31=function(a){a.target&&a.target.classList&&a.target.classList.contains("_5wd4")&&(this.props.onFocus&&this.props.onFocus())}.bind(this),this.$10=!0,this.$6=!0}a.prototype.shouldComponentUpdate=function(a,b){var c=this.props,d=this.state;return!c.onlineUsers.equals(a.onlineUsers)||c.hasFetchedAll!==a.hasFetchedAll||c.isFocused!==a.isFocused||!c.messages.equals(a.messages)||c.showContextBanner!==a.showContextBanner||c.readReceipts!==a.readReceipts||c.thread!==a.thread||c.threadID!==a.threadID||d.loadingMessages!==b.loadingMessages||d.hideLastMessageIndicator!==b.hideLastMessageIndicator};a.prototype.componentDidMount=function(){this.$7=new(b("SubscriptionsHandler"))(),this.$13(),this.$14(),b("gkx")("AT5Tksg1z1eIa6YmOH92o0v-zwCN16C1uxMcqW4ABgK3zj0WXDYLwN8d-MFrMPsR3UdYLnPnjw9H3yKbwAuQAAWx")||this.$15(),b("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$16()),this.setState({scrollbarPadding:r(this.refs.scrollContainer)}),this.$12=b("throttle")(this.$17,p),this.$8=this.props.messages.filter(function(a){return a.is_sponsored}),this.$12()};a.prototype.componentDidUpdate=function(a){__p&&__p();b("gkx")("AT5Tksg1z1eIa6YmOH92o0v-zwCN16C1uxMcqW4ABgK3zj0WXDYLwN8d-MFrMPsR3UdYLnPnjw9H3yKbwAuQAAWx")||this.$15();if(this.$3){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer),d=this.$3||0;c=c.scrollHeight-d;this.scrollToPosition(c,!1);this.$3=null}if(!a.messages.equals(this.props.messages)){b("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$16());d=a.messages.last();c=this.props.messages.last();if(d!==c&&c&&c.author){a=b("MercuryIDs").getUserIDFromParticipantID(c.author);a===b("CurrentUser").getID()&&(b("gkx")("AT5Tksg1z1eIa6YmOH92o0v-zwCN16C1uxMcqW4ABgK3zj0WXDYLwN8d-MFrMPsR3UdYLnPnjw9H3yKbwAuQAAWx")?this.$18():(this.scrollToBottom(!1),this.$19()))}}this.$12();b("gkx")("AT5Tksg1z1eIa6YmOH92o0v-zwCN16C1uxMcqW4ABgK3zj0WXDYLwN8d-MFrMPsR3UdYLnPnjw9H3yKbwAuQAAWx")&&this.$20()};a.prototype.componentWillUnmount=function(){this.$1&&b("clearImmediate")(this.$1),this.$7.release()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){__p&&__p();var c=this.state.loadingMessages&&a.messages.size>0&&!a.messages.equals(this.props.messages);if(c||a.hasFetchedAll||a.showContextBanner){this.setState({loadingMessages:!1});c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);var d=c.scrollHeight;c=b("Scroll").getTop(c);this.$3=d-c}this.$8=a.messages.filter(function(a){return a.is_sponsored})};a.prototype.$15=function(){var a=arguments.length<=0||arguments[0]===undefined?!1:arguments[0];this.$6&&b("TimeSlice").guard(function(){this.scrollToBottom(a)}.bind(this),"post load chat animations",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};a.prototype.renderGroupWave=function(){var a=this.props.thread;return b("MercuryIDs").isLocalThread(this.props.threadID)&&b("gkx")("AT7uCGaYk4KWBCIq3SurfBIwk1DjmbU_QXgSqcY73Sdnw3DJhbzA4qigZjhm4wwYtWnHVZcxghHN6RO33C1W8YjG")&&a&&!a.is_canonical&&!a.thread_fbid?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement(b("XUISpinner.react"),{background:"light",className:"loading",size:"small"}),bootloadLoader:b("JSResource")("ChatWaveImage.react").__setRef("FantaConversationScroller.react"),thread:a,m4Thread:j!=null}):null};a.prototype.$25=function(){__p&&__p();var a=this.props.threadID,c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!c)return;var d=void 0,e=void 0;try{d=c.getBoundingClientRect(),e=this.refs.conversation?this.refs.conversation.getMessageList():null}catch(a){return}if(!e||!d)return;var f=[];c=b("MessengerVideoAutoplayStore").getMessageIDs(a);var g=c||this.$16()||b("immutable").List();g.map(function(a){var c=b("MercuryAttachment").getVideoElem(a,e);c&&f.push([a,c.getBoundingClientRect()])});f.length&&b("MessengerVideoAutoplayActions").onScroll(a,c?null:g,b("immutable").Map(f),d)};a.prototype.$16=function(){return this.props.messages.filter(function(a){return b("MercuryAttachment").isSingleVideoAttachment(a)||b("MercuryAttachment").isSharedVideoAttachmentMessage(a)}).reverse().map(function(a){return a.message_id})};a.prototype.scrollToBottom=function(a){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);c&&this.scrollToPosition(c.scrollHeight,a)};a.prototype.scrollToPosition=function(a,c){var d=b("ReactDOM").findDOMNode(this.refs.scrollContainer);this.$5&&this.$5.stop();c?this.$5=new(b("Animation"))(d).to("scrollTop",a).ease(b("Animation").ease.end).duration(400).go():b("Scroll").setTop(d,a)};a.prototype.$24=function(a){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);a=a===0?0:a||o;return b("Scroll").getTop(c)+c.clientHeight>=c.scrollHeight-a};a.prototype.$23=function(){var a=b("ReactDOM").findDOMNode(this.refs.scrollContainer);return b("Scroll").getTop(a)<a.clientHeight};a.prototype.$18=function(){this.$11&&(b("clearTimeout")(this.$11),delete this.$11),this.$24(0)&&(this.$27(!1),this.$10=!0)};a.prototype.$20=function(){this.$11&&this.$26(),this.$10&&this.$27(!1)};a.prototype.$19=function(){var a=this.$6;this.$24()?this.$6=!0:this.$6=!1;a!==this.$6&&(this.$1=b("setImmediate")(this.$30))};a.prototype.$13=function(){__p&&__p();var a=this,c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!c)return;b("gkx")("AT5Tksg1z1eIa6YmOH92o0v-zwCN16C1uxMcqW4ABgK3zj0WXDYLwN8d-MFrMPsR3UdYLnPnjw9H3yKbwAuQAAWx")?this.$7.addSubscriptions(b("Event").listen(c,"click",this.$29),b("Event").listen(c,"contextmenu",this.$29),b("Event").listen(c,"doubleclick",this.$29),b("Event").listen(c,"drag",this.$29),b("Event").listen(c,"dragend",this.$29),b("Event").listen(c,"dragenter",this.$29),b("Event").listen(c,"dragexit",this.$29),b("Event").listen(c,"dragleave",this.$29),b("Event").listen(c,"dragover",this.$29),b("Event").listen(c,"dragstart",this.$29),b("Event").listen(c,"drop",this.$29),b("Event").listen(c,"mousedown",this.$29),b("Event").listen(c,"mouseenter",this.$29),b("Event").listen(c,"mouseleave",this.$29),b("Event").listen(c,"mousemove",this.$29),b("Event").listen(c,"mouseout",this.$29),b("Event").listen(c,"mouseover",this.$29),b("Event").listen(c,"mouseup",this.$29),b("Event").listen(c,"touchcancel",this.$29),b("Event").listen(c,"touchend",this.$29),b("Event").listen(c,"touchmove",this.$29),b("Event").listen(c,"touchstart",this.$29),b("Event").listen(c,"scroll",this.$29),b("Event").listen(c,"wheel",this.$29),b("Event").listen(c,"mousewheel",this.$29),b("Event").listen(c,"DOMMouseScroll",this.$29)):(function(){var d=b("isEventSupported")("mousewheel")?"mousewheel":b("isEventSupported")("wheel")?"wheel":"DOMMouseScroll",e=function(){this.$19()}.bind(a),f=function(){c.addEventListener(d,e,{passive:!0})},g=function(){c.removeEventListener(d,e,{passive:!0})};a.$7.addSubscriptions(b("Arbiter").subscribe("overflow-applied-to-body",function(){return this.$15()}.bind(a)),b("Event").listen(c,"mousedown",e),b("Event").listen(c,"mouseup",e),b("Event").listen(c,"mouseenter",f),b("Event").listen(c,"mouseleave",g),{cancel:g},b("Event").listen(c,"scroll",b("throttle")(a.$21,50)))})();var d=b("ScrollBoundaryContain").applyToElem(c);d&&this.$7.addSubscriptions(d)};a.prototype.$14=function(){this.$7.addSubscriptions(b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(a,c){this.props.threadID===c&&(b("gkx")("AT5Tksg1z1eIa6YmOH92o0v-zwCN16C1uxMcqW4ABgK3zj0WXDYLwN8d-MFrMPsR3UdYLnPnjw9H3yKbwAuQAAWx")?this.$18():this.$27(!1),clearInterval(this.$4),this.$4=setInterval(function(){this.$27(!1)}.bind(this),50))}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(a){clearInterval(this.$4)}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION,function(a){clearInterval(this.$4)}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").REMOVE,function(a){this.props.threadID===a&&clearInterval(this.$4)}.bind(this)))};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.hasFetchedAll,d=a.messages,e=a.showContextBanner,f=a.thread;a=a.threadID;var g=b("CurrentUser").getID(),i=b("gkx")("AT572SLwCLmZDDTsXg5I9LZsOQ15AFaFyPW6mF-2-OPcT86erU7KYs2R9o67DUyJwQ6AK0Y7upy2o2--jlRi_7EZ");i=i&&(k.isEmptyLocalThread(a)||c||e);c=!b("MercuryConfig").ChatSeenHeadsEnabled;e=this.state.loadingMessages||!f?b("React").createElement("div",{className:"_1xdl"},b("React").createElement(b("XUISpinner.react"),{background:"light",className:"loading",size:"small"})):null;var m=function(){return this.$15()}.bind(this);f=b("React").createElement(b("FantaPageGreetingLoader.react"),{thread:f,threadID:a});i=i?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MessengerContextBannerContainer.react").__setRef("FantaConversationScroller.react"),isContinuation:!1,location:b("MercuryShareAttachmentRenderLocations").CHAT,viewer:g,threadID:a}):null;var n=b("React").createElement("div",{className:"accessible_elem"},h._("D\u00e9but de la conversation")),o=b("React").createElement("div",{className:"accessible_elem"},h._("Fin de la discussion"));m=b("React").createElement(b("React").Fragment,null,b("React").createElement(b("FantaConversation.react"),babelHelpers["extends"]({onAttachmentLoad:m,scrollbarPadding:this.state.scrollbarPadding,ref:"conversation"},this.props)),b("gkx")("AT7Fdvvof3gB21NGh8Fo7o5af68El03cTnUDtqQrI_yHQbziWN3MyQvvj6iMavHBZ0fTg3S3rpHTM9337zgjjUnM")?b("React").createElement(b("MercuryCamQuickReply.react"),{camQuickReplyWillShow:b("emptyFunction"),camQuickReplyDidShow:function(){return this.$15(!0)}.bind(this),lastMessage:d.size>0?d.last():undefined,threadID:a,viewer:g}):null,b("React").createElement(b("MercuryQuickReply.react"),{lastMessage:d.size>0?d.last():undefined,threadID:a,quickReplyDidShow:function(){return this.$15(!0)}.bind(this),viewer:g,quickCamOriginLocation:b("MessengerQuickCamOrigins").CHAT_TAB}),b("React").createElement(b("ChatTypingIndicatorsWrapper.react"),{threadID:a,indicatorClass:undefined,indicatorsWillShow:b("emptyFunction"),indicatorsDidShow:function(){return this.setState({hideLastMessageIndicator:!0},function(){b("gkx")("AT5Tksg1z1eIa6YmOH92o0v-zwCN16C1uxMcqW4ABgK3zj0WXDYLwN8d-MFrMPsR3UdYLnPnjw9H3yKbwAuQAAWx")?this.$20():this.$15(!0)}.bind(this))}.bind(this),indicatorsDidHide:function(){return this.setState({hideLastMessageIndicator:!1})}.bind(this),rootClassName:undefined,viewer:g,onlineUsers:this.props.onlineUsers}),this.renderGroupWave(),c?b("React").createElement(b("MercuryLastMessageIndicator.react"),{isTyping:this.state.hideLastMessageIndicator,indicatorDidShow:function(){b("gkx")("AT5Tksg1z1eIa6YmOH92o0v-zwCN16C1uxMcqW4ABgK3zj0WXDYLwN8d-MFrMPsR3UdYLnPnjw9H3yKbwAuQAAWx")?this.$20():this.$15(!0)}.bind(this),indicatorWillShow:b("emptyFunction"),lastMessage:d.size>0?d.last():null,readReceipts:this.props.readReceipts,threadID:a}):null);g=b("React").createElement("div",{className:"_1xdm"+(e?" _1xdw":"")},b("React").createElement("div",{className:"_1xdx"},b("React").createElement("div",{className:"_1xe8"})),n,i,e,b("React").createElement("div",{style:d.size>0?{height:"176px"}:e?{height:"168px"}:{height:"192px"},className:"_1xdm"},m),o);return j!=null?b("React").createElement(j,{spacerContent:b("React").createElement(b("React").Fragment,null,n,f,i,e),scrollRef:function(a){this.refs.scrollContainer=a}.bind(this)},m,o):b("React").createElement("div",{className:"_2v5j"},b("React").createElement("div",{className:"fbNubFlyoutBody scrollable",onClick:this.$31,ref:"scrollContainer",role:"button",tabIndex:"0"},b("React").createElement("div",{className:"fbNubFlyoutBodyContent"},f,b("React").createElement(b("Grid.react"),{className:"conversationContainer",role:"log",cols:1},b("React").createElement(l,{alignv:"bottom"},g)))))};a.prototype.$22=function(){var a=b("ReactDOM").findDOMNode(this.refs.scrollContainer),c=b("getElementPosition")(a);b("Arbiter").inform("chatScrolled/"+this.props.threadID,{scrollTop:b("Scroll").getTop(a),top:c.y,viewHeight:c.height})};a.prototype.$27=function(a){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);c&&this.$32(c.scrollHeight,a)};a.prototype.$32=function(a,c){var d=b("ReactDOM").findDOMNode(this.refs.scrollContainer);this.$5&&this.$5.stop();c===!0?this.$5=new(b("Animation"))(d).to("scrollTop",a).ease(b("Animation").ease.end).duration(400).go():b("Scroll").setTop(d,a)};a.propTypes={hasFetchedAll:c.bool.isRequired,isFocused:c.bool.isRequired,messages:c.object.isRequired,onFocus:c.func,onLoadMoreMessages:c.func.isRequired,onlineUsers:c.instanceOf(b("immutable").List).isRequired,showContextBanner:c.bool,thread:c.object,threadID:c.string.isRequired};e.exports=a}),null);
__d("FantaDragAndDropRow.react",["cx","fbt","ix","Bootloader","Image.react","MessengerEnvironment","MercuryAttachment","React","XUICloseButton.react","XUISpinner.react","emptyFunction","ifRequired","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.$1=function(){var a=this.props,c=a.threadID,d=a.fileData;b("MessengerEnvironment").messengerui?b("ifRequired")("MessengerActions",function(a){a.cancelFileUpload(c,d.id)},function(){b("Bootloader").loadModules(["MessengerActions"],function(a){a.cancelFileUpload(c,d.id)},"FantaDragAndDropRow.react")}):b("ifRequired")("FantaMessageActions",function(a){a.cancelFileUpload(c,d.id)},function(){b("Bootloader").loadModules(["FantaMessageActions"],function(a){a.cancelFileUpload(c,d.id)},"FantaDragAndDropRow.react")})}.bind(this),c}a.prototype.componentDidMount=function(){b("MessengerEnvironment").messengerui?b("Bootloader").loadModules(["MessengerActions"],b("emptyFunction"),"FantaDragAndDropRow.react"):b("Bootloader").loadModules(["FantaMessageActions"],b("emptyFunction"),"FantaDragAndDropRow.react")};a.prototype.render=function(){var a=this.props,c=a.fileData;a=a.isUploaded;c=c.file;var d="";c.type&&(d=b("MercuryAttachment").getAttachIconClassByMime(c.type));d=b("joinClasses")(d,"_3tn");a=a?"done":"";a=b("joinClasses")(a,"_2qh _2qe uploadFileRow");return b("React").createElement("div",{className:a},b("React").createElement(b("XUISpinner.react"),{className:"_2qf"}),b("React").createElement(b("XUICloseButton.react"),{"aria-label":h._("Supprimer le fichier"),className:"_2qg",shade:"dark",size:"small",onClick:this.$1}),b("React").createElement("div",{className:"_4-te"},b("React").createElement("span",{className:d},b("React").createElement(b("Image.react"),{src:i("86988")})),c.name))};e.exports=a}),null);
__d("FantaDragAndDrop.react",["Bootloader","BootloadOnRender.react","FantaDragAndDropRow.react","FantaTypeComposer","JSResource","LazyComponent.react","MercuryShareAttachmentRenderLocations","MessengerEnvironment","React","emptyFunction","gkx","ifRequired"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=960;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$3=function(a){var b=this.props.composer;this.$7(function(c){c.removeSharePreview(a,b)})}.bind(this),this.$4=function(a,b){var c=this.props.composer;this.$7(function(d){d.loadedShareData(a,b,c)})}.bind(this),this.$5=function(a){var b=this.props.composer;this.$7(function(c){c.loadingShareData(a,b)})}.bind(this),b}a.prototype.componentDidMount=function(){b("MessengerEnvironment").messengerui?b("Bootloader").loadModules(["MessengerActions"],b("emptyFunction"),"FantaDragAndDrop.react"):b("Bootloader").loadModules(["FantaMessageActions"],b("emptyFunction"),"FantaDragAndDrop.react")};a.prototype.shouldComponentUpdate=function(a){var b=this.props,c=b.composer,d=a.composer,e=c.fileUploader,f=e.uploadingFiles;e=e.uploadedFiles;var g=d.fileUploader.uploadingFiles,h=d.fileUploader.uploadedFiles;c=c.sharePreview;d=d.sharePreview;return b.threadID!==a.threadID||!!(!f&&g)||!!(f&&g&&!f.equals(g))||!!(!e&&h)||!!(e&&h&&!e.equals(h))||!!(!c&&d)||!!(c&&d&&!c.equals(d))};a.prototype.render=function(){var a=this.props,c=a.composer;a=a.threadID;var d=c.sharePreview,e=d.share;d=d.uri;c=c.fileUploader;var f=c.uploadingFiles;c=c.uploadedFiles;return b("React").createElement("div",{className:"fbNubFlyoutAttachments"},b("React").createElement("div",{className:"chatAttachmentShelf"},e||d?b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MercurySharePreview.react").__setRef("FantaDragAndDrop.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{onClose:this.$3,onLoaded:this.$4,onLoading:this.$5,threadID:a,imageSize:{width:h,height:h},location:b("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW,share:e,uri:d})}):null,!b("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw")&&b("React").createElement("div",{ref:function(a){this.$1=a}.bind(this)},this.$6(f,!1),this.$6(c,!0))))};a.prototype.$7=function(a){b("MessengerEnvironment").messengerui?b("ifRequired")("MessengerActions",function(b){a(b)},function(){b("Bootloader").loadModules(["MessengerActions"],function(b){a(b)},"FantaDragAndDrop.react")}):b("ifRequired")("FantaMessageActions",function(b){a(b)},function(){b("Bootloader").loadModules(["FantaMessageActions"],function(b){a(b)},"FantaDragAndDrop.react")})};a.prototype.$6=function(a,c){var d=this.props.threadID;return a&&a.map(function(a){return b("React").createElement(b("FantaDragAndDropRow.react"),{fileData:a,isUploaded:c,key:c?"uped-"+a.id:"uping-"+a.id,threadID:d})}).toArray()};a.propTypes={composer:c.object.isRequired,threadID:c.string.isRequired};e.exports=a}),null);
__d("FantaMercuryTabOverflowBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{items:this.props.items}),loader:b("JSResource")("FantaMercuryTabOverflow.react").__setRef("FantaMercuryTabOverflowBootloader.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTab.react",["cx","EventProfiler","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=!1,b}a.prototype.componentDidMount=function(){b("EventProfiler").informManualInteractionTimestamp(["MessageJewelListItem","ChatSideBarLink"],!0,"click")};a.prototype.render=function(){var a=this.props,c=a.isFocused,d=a.isLastTab,e=a.isLastTabOfType,f=a.MainComponent,g=a.messengerState,h=a.MinimizedComponent,i=a.raisedTabCount,j=a.tab;a=a.tabContent;h=j.isMinimized?h:f;f=j.id+(j.isMinimized?"-minimized":"-maximized");var k=this.$1&&!j.isMinimized;this.$1=j.isMinimized;return b("React").createElement("div",{className:"_5qi9 _5qib"+(this.props.isFocused?" _5qic":"")+(j.isMinimized?" _3001":"")},b("React").createElement(h,{isFocused:c,isHovered:j.isHovered||k,isLastTab:d,isLastTabOfType:e,key:f,messengerState:g,raisedTabCount:i,tab:j,tabContent:a}))};e.exports=a}),null);
__d("FantaTabGroup.react",["cx","FantaTab.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldComponentUpdate=function(a){return!this.props.tabGroup.equals(a.tabGroup)||this.props.messengerState!==a.messengerState||!!(!this.props.tabContents&&a.tabContents)||!!(this.props.tabContents&&a.tabContents&&!this.props.tabContents.equals(a.tabContents))};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.isLastOfTypeChecker,d=a.MainComponent,e=a.messengerState,f=a.MinimizedComponent,g=a.OverflowComponent,h=a.tabContents;a=a.tabGroup;var i=a.focusedTabID,j=a.getRaisedandUnraisedTabs(),k=j.raisedTabs;j=j.unraisedTabs;var l=void 0;c&&(l=k.findLastKey(function(a){return c(a)&&a.id}));a=a.allowedRaisedTabs===0?null:this.$1(j,g);var m=k.count();return b("React").createElement("div",{className:"_59v1"},a,k.map(function(a){return b("React").createElement(b("FantaTab.react"),{isFocused:a.id===i,isLastTab:a===k.last(),isLastTabOfType:a.id===l,key:a.id,messengerState:e,MainComponent:d,MinimizedComponent:f,raisedTabCount:m,tab:a,tabContent:h&&h.get(a.id)})}).toArray())};a.prototype.$1=function(a,c){return!a.isEmpty()?b("React").createElement("div",{className:"_1kws"},b("React").createElement(c,{items:a})):null};function a(){h.apply(this,arguments)}a.propTypes={MainComponent:c.func.isRequired,messengerState:c.array,MinimizedComponent:c.func.isRequired,OverflowComponent:c.func.isRequired,tabContents:c.object,tabGroup:c.object.isRequired};e.exports=a}),null);
__d("FantaPageComposerNullState.react",["cx","fbt","BootloadOnRender.react","FantaAppStore","JSResource","LazyComponent.react","MessengerDiscoveryEntryPoint","MessengerDiscoveryEntryPointsLoggingHelper","MNCommerceCallToActionType","MNCommercePostbackCTADataManager","MNCommercePostbackRefSendManager","React","XUISpinner.react","getPageIDFromThreadID"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$2=function(){var a=this.props,c=a.threadID;a=a.nullStateCTA;switch(a.action_type){case b("MNCommerceCallToActionType").OPEN_NATIVE:break;case b("MNCommerceCallToActionType").POSTBACK:default:var d=b("FantaAppStore").getState().tabGroup.tabs.get(c),e=[];d&&d.entryPoint&&d.entryPoint[0]&&Object.values(b("MessengerDiscoveryEntryPoint")).indexOf(d.entryPoint[0])!==-1&&e.push(b("MessengerDiscoveryEntryPointsLoggingHelper").getEntryPointsLoggingTagStr([d.entryPoint[0]]));b("MNCommercePostbackCTADataManager").sendAndConfirm(a.id,a.title,c,null,null,null,e);break}}.bind(this),c}a.prototype.render=function(){return b("React").createElement("div",{className:"_2xh0"},this.$1(),b("React").createElement("div",{className:"_2xh4 _59w_"},b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{cta:this.props.nullStateCTA,onClick:this.$2,threadID:this.props.threadID}),loader:b("JSResource")("ChatPageComposerNullState.react").__setRef("FantaPageComposerNullState.react"),placeholder:b("React").createElement(b("XUISpinner.react"),{size:"small"})})))};a.prototype.$1=function(){if(this.props.nullStateCTA!==null)switch(this.props.nullStateCTA.action_type){case b("MNCommerceCallToActionType").OPEN_NATIVE:return null;case b("MNCommerceCallToActionType").POSTBACK:if(!b("MNCommercePostbackRefSendManager").hasMDotMeRef(b("getPageIDFromThreadID")(this.props.threadID))&&!this.props.nullStateCTA.instantgame_metadata)return b("React").createElement("div",{className:"_4teq"},h._("Lorsque vous appuierez sur {cta title}, {name} verra vos informations publiques.",[h._param("cta title",this.props.nullStateCTA.title),h._param("name",this.props.pageName)]));break;default:return null}return null};e.exports=a}),null);
__d("FantaPendingActions.react",["Bootloader","BootloadOnRender.react","FantaTabActions","JSResource","LazyComponent.react","MercuryThreadActions","MessengerMessageRequestsTypedLogger","MessageRequestUtils","MessagingTag","React","MercuryIDs","CurrentUser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MercuryThreadActions").get();c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$3=function(){var a=this.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,c);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(c).setEntryPoint(null).log()}.bind(this),this.$4=function(a){var c=this.props.thread;c=!!c&&b("MessageRequestUtils").isFiltered(c);var d=b("CurrentUser").getID();d=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,d);a==="hide"&&new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(c?"other":"pending").setThreadKey(d).setEntryPoint("inbox_banner").log()}.bind(this),this.$1=function(){__p&&__p();var a=this.props,c=a.thread,d=a.threadID;a=!!c&&b("MessageRequestUtils").isFiltered(c);var e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,e);a?b("Bootloader").loadModules(["WebMessengerDeleteThreadDialog"],function(a){a.show(d,this.$3,this.$4,function(){return b("FantaTabActions").closeTab(d)})}.bind(this),"FantaPendingActions.react"):(function(){var a=b("MercuryIDs").isGroupChat(d);b("Bootloader").loadModules(["WebMessengerDeclineMRDialog"],function(e){e.show(c,d,function(){return b("FantaTabActions").closeTab(d)},a)},"FantaPendingActions.react")})();new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(e).setEntryPoint(null).log()}.bind(this),this.$2=function(){var a=this.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,c);h.changeFolder(this.props.threadID,b("MessagingTag").INBOX);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(c).setEntryPoint(null).log()}.bind(this),c}a.prototype.render=function(){var a=this.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);return b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("ChatPendingActions.react").__setRef("FantaPendingActions.react"),placeholder:b("React").createElement("div",{style:{height:27}}),component:b("React").createElement(b("LazyComponent.react"),{isFiltered:a,onDeleteClick:this.$1,onReplyClick:this.$2})})};e.exports=a}),null);
__d("FantaTabComposer.react",["fbt","ChatTabComposerContainer.react","FantaTabActions","FantaTypeComposer","Keys","LogHistory","MercuryIDs","MercuryThreadIDMap","MercuryThreads","PhotosUploadWaterfall","React","SimpleXUIDialog","TypingDetectorController","WaterfallIDGenerator","WorkFileUploadsGating","XUIDialogButton.react","XUIDialogCancelButton.react","emptyFunction","getEveryoneMentionIndex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MercuryThreadIDMap").get(),j=b("MercuryThreads").get(),k=b("LogHistory").getInstance("chat_tab_view");c=b("React").PropTypes;var l=/^\s*$/;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$3=b("WaterfallIDGenerator").generate(),this.$16=function(a){this.$1=a,this.props.isFocused&&!j.isNewEmptyLocalThread(this.props.threadID)&&this.focusInput()}.bind(this),this.$5=function(a,c){var d=this.props.threadID;i.getServerIDFromClientID(d,function(e){this.$2=new(b("TypingDetectorController"))(b("MercuryIDs").getUserIDFromThreadID(d),a,"mercury-chat",null,e,c)}.bind(this))}.bind(this),this.$15=function(a){this.$17(b("PhotosUploadWaterfall").UPLOAD_START,a),this.props.onSendPhoto(a,this.$1.onSend),this.$18("submit",a),this.focusInput()}.bind(this),this.$9=function(a){this.$17(b("PhotosUploadWaterfall").CLIENT_ERROR,a),this.$18("failed",a)}.bind(this),this.$11=function(a){this.$17(b("PhotosUploadWaterfall").CLIENT_ERROR,a),this.$18("failed",a)}.bind(this),this.$13=function(a){this.$17(b("PhotosUploadWaterfall").CANCEL_DURING_UPLOAD,a),this.$18("canceled",a)}.bind(this),this.$14=function(a){this.$17(b("PhotosUploadWaterfall").ALL_UPLOADS_DONE,a);this.$18("completed",a);a=a.image_ids.length||a.attachments.length;this.$19(a)}.bind(this),this.$10=function(){this.props.onSendMessage("",this.props.composer,this.$1.onSend)}.bind(this),this.$12=function(a){this.props.onSelectSticker(a,function(){return this.$1.getInput()&&this.$1.getInput().focus()}.bind(this))}.bind(this),this.$7=function(a,b,c){this.props.onSendHotLike(a.emoji,b,c,function(){return this.$1.getInput()&&this.$1.getInput().focus()}.bind(this))}.bind(this),this.$8=function(a){this.$1.getInput().insertEmoji(a)}.bind(this),this.$6=function(event,a){var c=this.props.threadID;event.keyCode===b("Keys").RETURN&&!event.shiftKey&&(event.preventDefault(),this.$4(a));if(event.keyCode===b("Keys").DOWN&&event.shiftKey&&this.hasEmptyInput()){b("FantaTabActions").minimizeTab(c);return}}.bind(this),this.$4=function(a){var c=this.$22();if(c){var d=b("getEveryoneMentionIndex")(c)>-1;d?this.$20(a,c):this.$21(a,c)}else this.$21(a,[])}.bind(this),c}a.prototype.componentDidMount=function(){var a=this.props,b=a.threadID;a=a.participants;this.props.isFocused&&a.length>0&&!j.isEmptyLocalThread(b)&&this.focusInput()};a.prototype.componentDidUpdate=function(a){this.props.isFocused&&this.props.isFocused!==a.isFocused&&!j.isEmptyLocalThread(this.props.threadID)&&this.focusInput()};a.prototype.componentWillUnmount=function(){this.$2&&this.$2.destroy()};a.prototype.render=function(){var a=this.props,c=a.participants,d=a.threadID;a=a.viewer;return c.length===0?b("React").createElement("div",null):b("React").createElement(b("ChatTabComposerContainer.react"),{composer:this.props.composer,disableInput:this.props.disableInput,disableFileUploads:!b("WorkFileUploadsGating").canUploadFiles,fileUploader:this.props.fileUploader,handleSend:this.$4,initializeThingsWithInputFn:this.$5,inputKeyDown:this.$6,onBlur:b("emptyFunction"),onCustomLikeSelect:this.$7,onEmojiSelect:this.$8,onEscape:this.props.onEscape,onFileUploadFail:this.$9,onMount:function(){},onP2PTrigger:this.$10,onPhotoUploadFail:this.$11,onStickerSelect:this.$12,onTab:this.props.onTab,onUploadCancel:this.$13,onUploadComplete:this.$14,onUploadSubmit:this.$15,placeholder:g._("\u00c9crivez un message..."),ref:this.$16,resizeFn:function(){},threadID:d,viewer:a})};a.prototype.$17=function(a,c){b("PhotosUploadWaterfall").sendSignal(babelHelpers["extends"]({qn:this.$3,step:a,uploader:b("PhotosUploadWaterfall").APP_CHAT},c||{}))};a.prototype.$19=function(a){if(a===0)return;this.$17(b("PhotosUploadWaterfall").POST_PUBLISHED,{count:a});this.$3=b("WaterfallIDGenerator").generate()};a.prototype.$18=function(a,b){k.debug("photo_uploader:"+a,"{}")};a.prototype.$20=function(a,c){var d=g._("Mentionner tout le monde\u00a0?").toString(),e=g._("Cela enverra une mention \u00e0 tous les membres de ce groupe.").toString(),f=g._("Mention \u0040everyone!").toString();f=b("React").createElement("div",null,b("React").createElement(b("XUIDialogCancelButton.react"),null),b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:f,use:"confirm",onClick:function(){this.$21(a,c)}.bind(this)}));b("SimpleXUIDialog").showEx(e,d,f,null,null)};a.prototype.$21=function(a,b){this.props.onSendMessage({message:a,mentions:b},this.props.composer,this.$1.onSend);return};a.prototype.focusInput=function(){this.$1&&this.$1.getInput()&&this.$1.getInput().focus()};a.prototype.$23=function(){return this.$1&&this.$1.getInput()&&this.$1.getInput().getValue()||""};a.prototype.$22=function(){if(!this.$1)return null;var a=this.$1.getInput();return a&&a.getMentions?a.getMentions():null};a.prototype.hasEmptyInput=function(){return l.test(this.$23())};a.propTypes={fileUploader:c.object,isFocused:c.bool.isRequired,onEscape:c.func.isRequired,onSelectSticker:c.func.isRequired,onSendHotLike:c.func.isRequired,onSendMessage:c.func.isRequired,onSendPhoto:c.func.isRequired,onTab:c.func.isRequired,participants:c.array.isRequired,threadID:c.string.isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("FantaTabSheetPlaceholder.react",["cx","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return b("React").createElement("div",{className:"_w_z"},b("React").createElement(b("XUISpinner.react"),null))};e.exports=a}),null);
__d("FantaTabSheet.react",["cx","BootloadedComponent.react","CurrentUser","FantaTabSheetActions","FantaTabSheetPlaceholder.react","JSResource","MercuryIDs","MercuryMessages","MercuryParticipants","MercurySheetPolicy","MessengerGroupsSyncStatus","React","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MercuryMessages").get();c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldComponentUpdate=function(a){var b=this.props;return b.threadID!==a.threadID||!b.tabContent.equals(a.tabContent)};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.threadID;a=a.tabContent;var d=a.loggingID,e=a.openSheet,f=a.privacyController,g=a.thread,h=a.typeahead,j=void 0;switch(e){case b("MercurySheetPolicy").sheets.ChatThreadIsMutedTabSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetChatThreadIsMuted.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatNameConversationTabSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetNameConversation.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement(b("FantaTabSheetPlaceholder.react"),null),key:e,thread:g,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatUserBlockedTabSheet:var k=b("MercuryIDs").getUserIDFromThreadID(c);if(k){k=b("MercuryParticipants").getNow(b("MercuryIDs").getParticipantIDFromUserID(k));k&&f&&(j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserBlockedTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),gender:k.gender,key:e,privacyActionController:f,shortName:k.short_name}))}break;case b("MercurySheetPolicy").sheets.ChatOfflineTabSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetOffline.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,privacyController:f,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatReadOnlyTabSheet:case b("MercurySheetPolicy").sheets.ChatReadOnlyPermanentTabSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetReadOnly.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,threadID:c});break;case b("MercurySheetPolicy").sheets.FantaAddFriendsSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetAddFriends.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement(b("FantaTabSheetPlaceholder.react"),null),key:e,loggingID:d,thread:g,threadID:c,typeahead:h});break;case b("MercurySheetPolicy").sheets.FantaAddMoreFriendsSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetAddMoreFriends.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement(b("FantaTabSheetPlaceholder.react"),null),key:e,loggingID:d,thread:g,threadID:c,typeahead:h});break;case b("MercurySheetPolicy").sheets.ChatThreadIsMessageBlockedSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetMessageBlocked.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatUserFocusSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserFocusSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,thread:g,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatUserFocusBypassSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserFocusBypassSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e});break;case b("MercurySheetPolicy").sheets.ChatUserTimezoneSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserTimezoneSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),data:a.timezoneInfo,key:e,onDismiss:function(){return b("FantaTabSheetActions").closeUserTimezoneSheet(c)},resize:b("emptyFunction"),threadID:c});break;case b("MercurySheetPolicy").sheets.ChatUploadWarningTabSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUploadWarningTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e});break;case b("MercurySheetPolicy").sheets.ChatNoRecipientsTabSheet:b("MercuryIDs").isCanonical(c)||(j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatNoRecipientsTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e}));break;case b("MercurySheetPolicy").sheets.ChatNewMessagesTabSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaNewMessagesTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatEmployeeAwaySheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatEmployeeAwaySheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e});break;case b("MercurySheetPolicy").sheets.ChatEventReminderTabSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaEventReminderTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatAppointmentBanner:if(g){k=i.getCurrentlyLoadedMessages(c);j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatAppointmentBannerRoot.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),pageID:g.other_user_fbid,userID:b("CurrentUser").getID(),count:100,messageList:k,appointmentBannerDidUpdate:b("emptyFunction"),key:e,threadID:c})}break;case b("MercurySheetPolicy").sheets.ChatMontageSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatMontageSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,threadID:c,onResize:b("emptyFunction")});break;case b("MercurySheetPolicy").sheets.ChatJoinCallSheet:if(g){f=g.rtc_call_data;d=g.thread_fbid;j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatJoinCallSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,rtcCallData:f,threadFBID:d})}break;case b("MercurySheetPolicy").sheets.ChatRoomAssociatedObjectSheet:if(g){h=g.associated_object;j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatRoomAssociatedObjectSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,associatedObject:h})}break;case b("MercurySheetPolicy").sheets.ChatWorkDoNotDisturbSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatWorkDoNotDisturbSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,description:a.workAvailabilityHumanReadable});break;case b("MercurySheetPolicy").sheets.ChatMentorshipProgramSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MentorshipProgramSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,mentorship:a.mentorship});break;case b("MercurySheetPolicy").sheets.ChatGroupsSyncTabSheet:g&&g.groups_sync_status==b("MessengerGroupsSyncStatus").OPT_IN&&g.groups_sync_fb_url&&(j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatGroupsSyncTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,url:g.groups_sync_fb_url}));break}return j?b("React").createElement("div",{className:"_1sk5"},b("React").createElement("div",{className:"_1sk6"},j)):null};function a(){h.apply(this,arguments)}a.propTypes={threadID:c.string.isRequired,tabContent:c.object.isRequired};e.exports=a}),null);
__d("FantaTabMain.react",["cx","fbt","invariant","Bootloader","BootloadOnRender.react","ChatBehavior","ChatTabBlinking","CurrentUser","DragDropTarget","Event","FantaAvailableStatus","FantaChatHeaderContainer.react","FantaConversationScroller.react","FantaDispatcher","FantaDragAndDrop.react","FantaMessageActions","FantaPageComposerNullState.react","FantaPendingActions.react","FantaTabActions","FantaTabComposer.react","FantaTabSheet.react","FBIDCheck","immutable","JSResource","Keys","LazyComponent.react","MercuryIDs","MercuryParticipants","MessageRequestUtils","MessagingTagConstants","MessengerBotMenuDataFetcher","MessengerParticipantUtils.bs","MessengerState.bs","MNCommercePageSetting","Parent","React","ReactDOM","SimpleXUIDialog","TrackingNodes","WorkFileUploadsGating","convertMIGColorToFIGColor","getPageIDFromThreadID","getVendorPrefixedEventName","gkx","idx","ifRequired","joinClasses","throttle","MarketplaceWWWFeatureGating"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=/\D+/g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.state={closing:!1,disableInput:!1},this.$20=function(event){var a=!!b("Parent").byClass(event.target,"fantaTabMain-"+this.props.tab.id),c=!!b("Parent").byClass(event.relatedTarget,"fantaTabMain-"+this.props.tab.id);if(!a||!c){if(this.$9){clearTimeout(this.$9);this.$9=null;return}b("FantaTabActions").hoveredTab(this.props.tab.id)}}.bind(this),this.$21=function(event){var a=!!b("Parent").byClass(event.target,"fantaTabMain-"+this.props.tab.id),c=!!b("Parent").byClass(event.relatedTarget,"fantaTabMain-"+this.props.tab.id);(!a||!c)&&(this.$9&&clearTimeout(this.$9),this.$9=setTimeout(function(){this.$9=null,b("FantaTabActions").unhoveredTab(this.props.tab.id)}.bind(this),500))}.bind(this),this.$18=function(event){var a=!!b("Parent").byClass(event.target,"fantaTabMain-"+this.props.tab.id),c=!!b("Parent").byClass(event.relatedTarget,"fantaTabMain-"+this.props.tab.id);(!a||!c)&&(!event.relatedTarget||!event.target?this.$7=setTimeout(function(){this.$7=null,this.$22(this.props.tab.id)}.bind(this),100):this.$22(this.props.tab.id))}.bind(this),this.$19=function(event){if(this.$7){clearTimeout(this.$7);this.$7=null;return}var a=!!b("Parent").byClass(event.target,"fantaTabMain-"+this.props.tab.id),c=!!b("Parent").byClass(event.relatedTarget,"fantaTabMain-"+this.props.tab.id),d=event.target;d&&d.classList&&(d.classList.contains("_3olu")||d.classList.contains("_61td")||d.classList.contains("_4zs3"))||(!a||!c)&&(b("FantaDispatcher").isDispatching()||b("FantaTabActions").focusTab(this.props.tab.id))}.bind(this),this.$24=function(a){b("FantaMessageActions").linkPreview(this.props.tab.id,a)}.bind(this),this.$23=function(a){var c=this.props.tabContent;c=c||{};c=c.composer;var d=this.props.tab.id,e=!1;b("gkx")("AT44gcd7lpH2YiclJ-LHsuuoRRi7VIOizU9LdST-uko3uQzHBXGOu3PdlMr4PkOBovUmJRjA-IeSNbDkk89bQ4wq8b7BDIrax8JSG-E9Uz6KPQ")&&b("ifRequired")("MercuryThreads",function(a){return e=a.get().isEmptyLocalThread(d)});c&&!e&&b("FantaMessageActions").prepareFilesForSend(d,a,c)}.bind(this),this.$15=function(a){a.keyCode===b("Keys").ESC&&(this.$2(!0),a.preventDefault(),a.stopPropagation())}.bind(this),this.$16=function(a){a.keyCode===b("Keys").TAB&&this.$17(a)}.bind(this),this.$17=function(event){var a=this.props.raisedTabCount;a>1&&(event.preventDefault(),this.$3(event.ctrlKey,event.shiftKey))}.bind(this),this.$2=function(a){!this.refs.composer||this.refs.composer.hasEmptyInput()&&!this.$25()?this.$26(a):this.$27(a)}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){this.$2=b("throttle")(this.$2,100),this.$3=b("throttle")(this.$3,100)};a.prototype.componentDidMount=function(){this.$10(),this.$11(),this.$12(this.props.tab.id),this.$13(),this.$14()};a.prototype.componentDidUpdate=function(){this.$11()};a.prototype.componentWillUnmount=function(){this.$4&&this.$4.disable()};a.prototype.shouldComponentUpdate=function(a,b){var c=this.props,d=this.state;return c.hasFetchedAll!==a.hasFetchedAll||c.isFocused!==a.isFocused||c.isHovered!==a.isHovered||c.isLastGroupTab!==a.isLastGroupTab||!c.messages.equals(a.messages)||!c.tab.equals(a.tab)||!c.tabContent&&!!a.tabContent||c.tabContent&&!c.tabContent.equals(a.tabContent)||c.thread!==a.thread||c.messengerState!==a.messengerState||d.closing!==b.closing||d.disableInput!==b.disableInput||!c.onlineUsers.equals(a.onlineUsers)};a.prototype.$11=function(){__p&&__p();var a=this.props,c=a.tab;a=a.thread;c=c.id;if(!a)return;var d=this.refs.root&&b("ReactDOM").findDOMNode(this.refs.root);if(!d)return;a=a.unread_count;if(a!==undefined){a=!!a&&(!b("ChatBehavior").showsTabUnreadUI||b("ChatBehavior").showsTabUnreadUI());a?b("ChatTabBlinking").blinkTab(c,{getTabElem:function(){return d},isFocused:function(){return this.props.isFocused}.bind(this),isHovered:function(){return!1}}):b("ChatTabBlinking").unblinkTab(c)}};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.hasFetchedAll,d=a.isFocused,e=a.isHovered,f=a.isLastGroupTab,g=a.messages,j=a.onLoadMoreMessages,k=a.onSelectSticker,l=a.onSendHotLike,m=a.onSendMessage,n=a.onSendPhoto,o=a.showContextBanner,p=a.tab,q=a.tabContent;a=a.thread;p=p.id;var r=b("CurrentUser").getID(),s=q&&q.composer.fileUploader,t=q&&q.composer.sharePreview,u=s&&s.uploadingFiles,v=s&&s.uploadedFiles,w=a&&b("convertMIGColorToFIGColor")(a.custom_color),x=q&&q.nullStateCTA,y=x&&a&&a.message_count===0,z=a&&a.participants||[],A=q&&q.threadPreviewRecipients||b("immutable").List();z=z.length>0?z:A.toArray();A=(A=this.props)!=null?(A=A.thread)!=null?A.other_user_fbid:A:A;A=A?b("MercuryParticipants").getNow(b("MercuryIDs").getParticipantIDFromUserID(A)):null;A=A&&A.short_name||"page";var B=b("getPageIDFromThreadID")(this.props.tab.id);y=a&&b("MessageRequestUtils").isMessageRequest(a)?b("React").createElement(b("FantaPendingActions.react"),{thread:a,threadID:p}):y&&x?b("React").createElement(b("FantaPageComposerNullState.react"),{threadID:p,nullStateCTA:x,pageName:A}):q?b("React").createElement("div",{className:"fbNubFlyoutFooter"+(this.state.disableInput?" fbNubFlyoutComposerDisabled":"")},b("React").createElement(b("FantaTabComposer.react"),{composer:q.composer,disableInput:this.state.disableInput,fileUploader:s,isFocused:d,onEscape:this.$15,onKeyDown:this.$15,onKeyPress:this.$16,onSelectSticker:k,onSendHotLike:l,onSendMessage:m,onSendPhoto:n,onTab:this.$17,ref:"composer",participants:z,threadID:p,viewer:r})):null;x=b("FantaAvailableStatus").isAvailable(a,p);!q&&i(0);A=b("React").createElement(b("FantaTabSheet.react"),{tabContent:q,threadID:p});k=(s=a)!=null?s.marketplace_thread_data:s;m=(l=k)!=null?l.for_sale_item:l;z=(n=k)!=null?n.buyer_fbid:n;l=(s=k)!=null?s.seller_fbid:s;n=void 0;if(m&&z&&l){k=b("MarketplaceWWWFeatureGating").marketplaceWWWMessengerBanner;n=k?b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MarketplaceMessengerContextBanner.react").__setRef("FantaTabMain.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{buyerID:z,forSaleItem:m,renderLocation:"chat",sellerID:l})}):null}s=q&&q.isMultiCompany;z=q&&q.joinableInterstitialData?b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("ChatJoinableInterstitialPreview.react").__setRef("FantaTabMain.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{data:q.joinableInterstitialData,isActive:d,onClose:this.$2})}):b("React").createElement("div",{className:"fbNubFlyoutInner"},b("React").createElement(b("FantaChatHeaderContainer.react"),{blockedIDs:b("MessengerState.bs").blockedIds(this.props.messengerState),composer:q.composer,customColor:w,isFocused:d,isLastGroupTab:f,isMultiCompany:s,membershipParticipants:q.membershipParticipants,onClose:this.$2,thread:a,threadID:p,viewer:r}),b("React").createElement("div",{className:"_1ia _2sz2",ref:function(a){this.$5=a}.bind(this)},A,b("React").createElement(b("FantaConversationScroller.react"),{hasFetchedAll:c,isFocused:d,messages:g,onFocus:function(){return this.refs.composer&&this.refs.composer.focusInput()}.bind(this),onLoadMoreMessages:j,onlineUsers:this.props.onlineUsers,readReceipts:b("MessengerState.bs").readReceiptsPerThread(this.props.messengerState),showContextBanner:o,thread:a,threadID:p,viewer:r}),b("React").createElement("div",{className:"_3bpu"}),b("React").createElement("div",{className:"_2hc2"},b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("P2PChatThreadBannerContainer.react").__setRef("FantaTabMain.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{isVisible:!0,otherUserID:b("MercuryIDs").getUserIDFromThreadID(p),threadID:p})})),b("React").createElement("div",{className:"_4g6x"},b("React").createElement("div",{className:"_4g6y"},b("React").createElement("div",{className:"_4g6z _4g71"},h._("Faites glisser le lien\/les fichiers ici")),b("React").createElement("div",{className:"_4g6z _4g6- _4g6_"},h._("D\u00e9poser les fichiers ici")),b("React").createElement("div",{className:"_4g6z _4g6- _4g70"},h._("D\u00e9poser le lien ici")))),B&&b("gkx")("AT6sbgm7rc2lUrfkuLmhGQcvGZoC5P9uoMvWR1gdSA6TrdITISrYRi27xHKWuRHMYoI4W7RaxO4KyBa-w6z3OpbbspZrp85jUpATWVUJp3E46w")?b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{originalElement:y,pageID:B,playLinkClassName:"_2xh6 _2h_r",showGameImage:!0,threadFBID:(k=this.props)!=null?(k=k.thread)!=null?k.thread_fbid:k:k,threadID:p}),loader:b("JSResource")("MessengerGameBotPlayButton.react").__setRef("FantaTabMain.react"),placeholder:b("React").createElement("div",null)}):y,b("React").createElement(b("FantaDragAndDrop.react"),{composer:q.composer,threadID:p,uploadedFiles:v,uploadingFiles:u,sharePreview:t}),n));return b("React").createElement("div",{className:b("joinClasses")((this.state.closing?"_2suj":"")+" _3_9e _s0f _50mz _50m_"+(x?" _4-0b":"")+" fbNub _50-v"+(d?" focusedTab":"")+(e?" hoveredTab":"")+" opened _27_3"+(b("gkx")("AT74KMJ8RYhvB1tMU93uHQ5gZqTAUi_w-rBy6KswPeaIPbVgyCy23kvmxPapx5bD4puY3bmrQeh4Z7ALUGarUq4kATHuSQM2CsFm5KKmhgZoYA")?" _68h9":"")+(!b("CurrentUser").isWorkUser()&&!B&&b("gkx")("AT4vZBWyiZL1KZrir2lJt4vVNMIYu8sDbA3PtNwJWZh5seJSYZeYdmCgqH3wgiUS4PfslnEPm3wz9jSsjDINBCSy")?" _68mb":""),"fantaTabMain-"+p),"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.CHAT_FLYOUT),onBlur:this.$18,onFocus:this.$19,onKeyDown:this.$15,onKeyPress:this.$16,onMouseEnter:this.$20,onMouseLeave:this.$21,ref:"root"},b("React").createElement("div",{className:"fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent",role:"complementary"},b("React").createElement("div",{className:"fbNubFlyoutOuter"},z)))};a.prototype.$22=function(a){b("FantaDispatcher").isDispatching()||b("FantaTabActions").blurTab(this.props.tab.id),this.$9&&(clearTimeout(this.$9),this.$9=null),b("FantaTabActions").unhoveredTab(a)};a.prototype.$14=function(){var a=b("getPageIDFromThreadID")(this.props.tab.id);a&&b("MessengerBotMenuDataFetcher").getHasPageSetting(a,function(a){this.setState({disableInput:a})}.bind(this),function(){this.setState({disableInput:!1})}.bind(this),b("MNCommercePageSetting").COMPOSER_INPUT_DISABLED)};a.prototype.$10=function(){__p&&__p();if(b("WorkFileUploadsGating").canUploadFiles&&!this.$4){var a=b("ReactDOM").findDOMNode(this.$5);if(a){a=new(b("DragDropTarget"))(a);this.$4=a;a.setOnFilesDropCallback(this.$23);a.setOnURLDropCallback(this.$24);a.enable()}}};a.prototype.$3=function(a,c){a||(c?b("FantaTabActions").focusPreviousTab():b("FantaTabActions").focusNextTab())};a.prototype.$25=function(){return this.$28()||this.$29()};a.prototype.$28=function(){var a,b=this.props.tabContent;a=((a=b)!=null?(a=a.composer)!=null?(a=a.fileUploader)!=null?a.uploadedFiles:a:a:a)||{size:0};b=((b=b)!=null?(b=b.composer)!=null?(b=b.fileUploader)!=null?b.uploadingFiles:b:b:b)||{size:0};return a.size>0||b.size>0};a.prototype.$29=function(){var a=this.props.tabContent;a=(a=a)!=null?(a=a.composer)!=null?a.sharePreview:a:a;return!!(a&&a.params&&a.type)};a.prototype.$26=function(a){var c=this.props.tab,d=b("ReactDOM").findDOMNode(this.refs.root);this.$1=setTimeout(function(){return a?b("FantaTabActions").closeAndTabNext(c.id):b("FantaTabActions").closeTab(c.id)},1.2*b("ifRequired")("cssVar",function(a){return"200ms".replace(k,"")},function(){return 200}));var e=b("Event").listen(d,b("getVendorPrefixedEventName")("animationend"),function(d){d.animationName==="closeChatTab"&&(a?b("FantaTabActions").closeAndTabNext(c.id):b("FantaTabActions").closeTab(c.id),clearTimeout(this.$1),e.remove())}.bind(this));this.$30();this.setState({closing:!0})};a.prototype.$27=function(a){var c=this.props.tab,d=c.id;b("FantaTabActions").blurTab(d);c=h._("Voulez-vous vraiment fermer cette fen\u00eatre de discussion\u00a0?");var e=h._("Vous n\u2019avez pas envoy\u00e9 votre message.");b("SimpleXUIDialog").showConfirm(c,e,function(c){c?a?b("FantaTabActions").closeAndTabNext(d):b("FantaTabActions").closeTab(d):b("FantaTabActions").focusTab(d)},{autofocusConfirm:!0,useReactFocusBehavior:!0})};a.prototype.$13=function(){this.$8=Math.floor(Date.now()/1e3)};a.prototype.$30=function(){var a=this.props.thread,c=a?a.other_user_fbid:null,d=Math.floor(Date.now()/1e3),e=this.$8;a&&c&&!b("FBIDCheck").isUser_deprecated(c)&&b("Bootloader").loadModules(["PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","PagesEventObserver","PagesEventType"],function(b,f,g,h,i){b.log(c,f.CLICK,g.MESSAGE_FANTA_TAB_CLOSE,"",["pages_surface_team"],{open_tab_timestamp:e,close_tab_timestamp:d,last_message_timestamp:a.last_message_timestamp,message_count:a.message_count,snippet_sender:a.snippet_sender,participants:a.participants}),h.notify(i.MESSAGES_FANTA_TAB_CLOSE,c,{open_tab_timestamp:e,close_tab_timestamp:d,last_message_timestamp:a.last_message_timestamp,message_count:a.message_count,snippet_sender:a.snippet_sender,participants:a.participants})},"FantaTabMain.react")};a.prototype.$12=function(a){__p&&__p();if(!b("MercuryIDs").isValidThreadID(a))return;b("Bootloader").loadModules(["GroupChatMessageBlockAlert","GroupChatMessageIgnoreAlert","MercuryIgnoredBlockedParticipants.bs","MercuryThreadActions","MercuryThreads"],function(c,d,e,f,g){__p&&__p();var h=f.get();f=g.get();f.getThreadMeta(a,function(f){var g=b("MessengerState.bs").fbid(this.props.messengerState),i=b("MessengerState.bs").ignoredIds(this.props.messengerState);b("MessengerState.bs").compute(g,function(j){j=j.blocked_ids;e.isPresentInGroupThread(g,j,f)?c.show(e.participantsInGroupThread(g,j,f),function(){b("FantaTabActions").focusTab(a)},function(){b("FantaTabActions").closeTab(a),h.leaveGroup(a)}):b("MessengerParticipantUtils.bs").areParticipantsInGroupThread(g,i,f)&&f.folder==="inbox"&&b("gkx")("AT6sQjs7GRVhEipNW3TkmIJi_BHZa2KKyD-Mi9QicLxYmeTJYm7WWpq-_Rh-wyDoXW1BNvzANnO7tf1hMqNgPGMF")&&d.show(b("MessengerParticipantUtils.bs").participantsInGroupThread(g,i,f),b("MercuryIDs").getThreadFBIDFromThreadID(a),function(){b("FantaTabActions").focusTab(a)},function(){b("FantaTabActions").closeTab(a),b("Bootloader").loadModules(["IgnoreMessagesTypedLogger","IgnoreMessagesLoggingEvent","IgnoreMessagesPlatforms"],function(c,d,e){h.changeFolder(a,b("MessagingTagConstants").other),new c().setEvent(d.IGNORE_CONFIRMED).setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a)).setPlatform(e.CHAT_TABS).log()},"FantaTabMain.react")})})}.bind(this))}.bind(this),"FantaTabMain.react")};a.propTypes={hasFetchedAll:c.bool.isRequired,isFocused:c.bool.isRequired,isHovered:c.bool.isRequired,isLastGroupTab:c.bool.isRequired,messages:c.object,messengerState:c.array,onlineUsers:c.instanceOf(b("immutable").List).isRequired,onLoadMoreMessages:c.func.isRequired,onSelectSticker:c.func.isRequired,onSendHotLike:c.func.isRequired,onSendMessage:c.func.isRequired,onSendPhoto:c.func.isRequired,raisedTabCount:c.number,showContextBanner:c.bool,tab:c.object.isRequired,tabContent:c.object,thread:c.object};e.exports=a}),null);
__d("FantaTabMainLoader.react",["Bootloader","FantaAppStore","FantaAvailableStatus","FantaGetMessageActions","FantaMessageActions","FantaTabMain.react","immutable","MercuryConfig","MercuryIDs","React","TimeSlice","emptyFunction","idx","requestIdleCallback","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;var h=function(a){__p&&__p();b("FantaAppStore").addReducers(a);a=b("FantaAppStore").getState();var c=(a=a)!=null?(a=a.mercury)!=null?a.tabContents:a:a;c&&(function(){var a=c.reduce(function(a,b){b=b.thread;b&&a.push(b);return a},[]);b("setImmediate")(function(){return b("FantaGetMessageActions").threadsUpdated(a)})})();h=b("emptyFunction")};d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$2=function(){var a=this.props.tab;b("FantaGetMessageActions").fetchMoreMessages(a.id)}.bind(this),this.$3=function(a,c){var d=this.props.tab;b("FantaMessageActions").sendSticker(d.id,a,c)}.bind(this),this.$4=function(a,c,d,e){var f=this.props.tab;b("FantaMessageActions").sendHotLike(f.id,a,c,d,e)}.bind(this),this.$5=function(a,c,d){var e=this.props.tab;b("FantaMessageActions").sendMessage(e.id,a,c,d)}.bind(this),this.$6=function(a,c){var d=this.props.tab;b("FantaMessageActions").sendPhoto(d.id,a,c)}.bind(this),c}a.prototype.shouldComponentUpdate=function(a){var b=this.props;return b.isFocused!==a.isFocused||b.isHovered!==a.isHovered||b.isLastTabOfType!==a.isLastTabOfType||b.messengerState!==a.messengerState||!b.tab.equals(a.tab)||!b.tabContent.equals(a.tabContent)};a.prototype.componentDidMount=function(){var a=function(){b("Bootloader").loadModules(["FantaReducersTabSheets"],h,"FantaTabMainLoader.react")};b("TimeSlice").guard(function(){b("requestIdleCallback")(a)},"additional request not needed for initial display",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.isFocused,d=a.isHovered,e=a.isLastTabOfType,f=a.messengerState,g=a.raisedTabCount,h=a.tab;a=a.tabContent;var i=a.hasFetchedAll,j=a.showContextBanner,k=a.thread,l=a.threadPreviewID,m=a.messages;l=l?h.id+"-"+l:h.id;if(!a)return b("React").createElement("div",{key:"noContent-"+l});m||(m=b("immutable").List());var n=b("immutable").List([]);b("MercuryConfig").GDWC&&(n=this.$1(k,h));return b("React").createElement(b("FantaTabMain.react"),{hasFetchedAll:i,isFocused:c,isHovered:d,isLastGroupTab:e,key:l,messages:m,messengerState:f,onlineUsers:n,onLoadMoreMessages:this.$2,onSelectSticker:this.$3,onSendHotLike:this.$4,onSendMessage:this.$5,onSendPhoto:this.$6,raisedTabCount:g,showContextBanner:j,tab:h,tabContent:a,thread:k})};a.prototype.$1=function(a,c){__p&&__p();var d=b("MercuryIDs").getUserIDFromThreadID(c.id),e=[];d?e=b("FantaAvailableStatus").isAvailable(a,c.id)?[d]:[]:a&&(e=a.participants.filter(function(a){if(!a)return!1;a=b("MercuryIDs").getThreadIDFromParticipantID(a);if(!a)return!1;a=b("FantaAvailableStatus").isAvailable(null,a);return a}),e=e.map(function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)||""}));return b("immutable").List(e)};a.propTypes={isFocused:c.bool.isRequired,isHovered:c.bool.isRequired,isLastTabOfType:c.bool.isRequired,messengerState:c.array,raisedTabCount:c.number,tab:c.object.isRequired,tabContent:c.object};e.exports=a}),null);
__d("FantaTabMinimized.react",["cx","fbt","ChatBehavior","ChatTabBlinking","ChatTabHeaderContainer.react","CurrentUser","Event","FantaAvailableStatus","FantaTabActions","React","ReactDOM","SimpleXUIDialog","emptyFunction","getVendorPrefixedEventName","ifRequired"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=/\D+/g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={closing:!1},this.$4=function(){var a=this.props.tabContent;!a||a&&a.composer.text.length===0?this.$5():this.$6()}.bind(this),this.$3=function(event){var a=event.target;a&&a.classList&&!a.classList.contains("button")&&(event.preventDefault(),b("FantaTabActions").unminimizeTab(this.props.tab.id),b("FantaTabActions").focusTab(this.props.tab.id))}.bind(this),c}a.prototype.componentDidMount=function(){this.$2()};a.prototype.componentDidUpdate=function(){this.$2()};a.prototype.shouldComponentUpdate=function(a){var b=this.props;return!b.tab.equals(a.tab)||!b.tabContent&&!!a.tabContent||!!b.tabContent&&!b.tabContent.equals(a.tabContent)};a.prototype.$2=function(){__p&&__p();var a=this.props,c=a.tab;a=a.tabContent;c=c.id;if(!a)return;a=a.thread;if(!a)return;var d=this.refs.root&&b("ReactDOM").findDOMNode(this.refs.root);if(!d)return;a=a.unread_count;if(a!==undefined){a=!!a&&(!b("ChatBehavior").showsTabUnreadUI||b("ChatBehavior").showsTabUnreadUI());a?b("ChatTabBlinking").blinkTab(c,{getTabElem:function(){return d},isFocused:function(){return!1},isHovered:function(){return!1}}):b("ChatTabBlinking").unblinkTab(c)}};a.prototype.render=function(){var a=this.props,c=a.tab;a=a.tabContent;var d=a&&a.thread&&a.thread.custom_color,e=d?{color:d}:null;c=c.id;c=a&&!!a.thread&&b("FantaAvailableStatus").isAvailable(a.thread,c);return b("React").createElement("div",{className:"_4cd8 _50mz _50m_ fbNub _50-v"+(c?" _4-0b":"")+" _27_3",ref:"root"},b("React").createElement("div",{className:(this.state.closing?"_2suj":"")+" clearfix fbNubFlyoutTitlebar titlebar"+(d?" _1m34":""),style:e},b("React").createElement(b("ChatTabHeaderContainer.react"),{attachmentsShelf:document.createElement("div"),composer:a&&a.composer,isActive:!1,isRaised:!1,isTyping:!1,membershipParticipants:a&&a.membershipParticipants,nameConversationFunc:b("emptyFunction"),onClick:this.$3,onCloseClick:this.$4,onRTCNuxCloseButtonClick:b("emptyFunction"),rtcNuxShown:!1,sheetController:{},showAddFriend:b("emptyFunction"),threadID:this.props.tab.id,viewer:b("CurrentUser").getID()})))};a.prototype.$5=function(){var a=this.props.tab,c=b("ReactDOM").findDOMNode(this.refs.root);this.$1=setTimeout(function(){return b("FantaTabActions").closeAndTabNext(a.id)},1.2*b("ifRequired")("cssVar",function(a){return"200ms".replace(j,"")},function(){return 200}));var d=b("Event").listen(c,b("getVendorPrefixedEventName")("animationend"),function(c){c.animationName==="closeChatTab"&&(b("FantaTabActions").closeAndTabNext(a.id),clearTimeout(this.$1),d.remove())}.bind(this));this.setState({closing:!0})};a.prototype.$6=function(){var a=this.props.tab,c=h._("Voulez-vous vraiment fermer cette fen\u00eatre de discussion\u00a0?");b("FantaTabActions").blurTab(a.id);var d=h._("Vous n\u2019avez pas envoy\u00e9 votre message.");b("SimpleXUIDialog").showConfirm(c,d,function(c){c?b("FantaTabActions").closeAndTabNext(a.id):b("FantaTabActions").focusTab(a.id)},{autofocusConfirm:!0,useReactFocusBehavior:!0})};a.propTypes={tab:c.object.isRequired,tabContent:c.object};e.exports=a}),null);
__d("FantaMercuryTabsWithMain.react",["Bootloader","CurrentUser","FantaAppStore","FantaCookieUtil","FantaMercuryTabOverflowBootloader.react","FantaTabActions","FantaTabGroup.react","FantaTabMainLoader.react","FantaTabMinimized.react","FluxContainer","LazyComponent.react","LoadOnRender.react","MercuryIDs","MessengerState.bs","PresenceState","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MessengerState.bs").jsComponent,i=function(a){b("Bootloader").loadModules(["MessengerReasonDialogContainerReact.bs"],function(b){b=b.jsComponent;return a(b)},"FantaMercuryTabsWithMain.react")};g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("FantaAppStore")]};a.calculateState=function(){return{tabGroup:b("FantaAppStore").getState().tabGroup,tabContents:b("FantaAppStore").getState().mercury.tabContents}};a.prototype.componentDidMount=function(){this.props.loadDataOnMount&&b("FantaTabActions").loadFromData(b("FantaCookieUtil").convertCookieData(b("PresenceState").get()))};a.prototype.render=function(){return b("React").createElement(h,{fbid:b("CurrentUser").getID()},function(a){return[b("React").createElement(b("FantaTabGroup.react"),{key:"tabgroup",messengerState:a,MainComponent:b("FantaTabMainLoader.react"),MinimizedComponent:b("FantaTabMinimized.react"),OverflowComponent:b("FantaMercuryTabOverflowBootloader.react"),tabGroup:this.state.tabGroup,tabContents:this.state.tabContents,isLastOfTypeChecker:this.$1}),b("React").createElement(b("LoadOnRender.react"),{key:"dialog",component:b("React").createElement(b("LazyComponent.react"),null),loader:i,placeholder:b("React").createElement("span",null)})]}.bind(this))};a.prototype.$1=function(a){return b("MercuryIDs").isGroupChat(a.id)};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a)}),null);
__d("FantaTabsReactApp",["ChatPerfInstrumentation","FantaMercuryTabsWithMain.react","FantaTabsAppBase","React","ReactDOM","WorkplaceChatHelper","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=void 0;g=babelHelpers.inherits(a,b("FantaTabsAppBase"));g&&g.prototype;a.prototype.initializeFantaData=function(a){__p&&__p();if(b("WorkplaceChatHelper").suppressChatIfActiveOnDesktop())return;d(["FantaAppStore","FantaCookieUtil","FantaGetMessageActions","FantaTabActions","MercuryThreadInformer","PresenceState"],function(c,d,e,f,g,i){__p&&__p();f.loadFromData(d.convertCookieData(i.get(),null,a)),i.registerStateLoader(function(b){f.loadFromData(d.convertCookieData(b,c.getState().tabGroup,a))}),i.registerStateStorer(function(a){var b=c.getState().tabGroup;if(!h||h&&!h.equals(b)){h=b;return d.createCookieData(b,a)}else return a}),g.get().subscribe("threads-updated",function(a,c){Object.keys(c).forEach(function(a){b("setImmediate")(function(){e.refreshThread(a)})})}),b("ChatPerfInstrumentation").logInitData()})};a.prototype.initializeFantaUI=function(){__p&&__p();d(["FantaAppStore","FantaMercuryThreadEventsBootloaded","FantaMessageActions","FantaTabActions","FantaTabViewportManager","FBRTCMessageHandler","MercuryBrowserAlerts"],function(a,c,d,e,f,g,h){__p&&__p();g.init();h.init();b("ReactDOM").render(this.getViewComponent(),this.tabsElem);c.onMessagesReceived(function(a,c){b("setImmediate")(function(){d.receivedNewMessage(a,c)})});f.init(this.tabsElem);b("ChatPerfInstrumentation").logInitUI();e=a.getState().tabGroup.tabs;e.toArray().length===0&&b("ChatPerfInstrumentation").logDisplayDone()}.bind(this))};a.prototype.getViewComponent=function(){return b("React").createElement(b("FantaMercuryTabsWithMain.react"),{loadDataOnMount:!1})};function a(){g.apply(this,arguments)}e.exports=new a()}),null);
__d("ChatInitialDataTransformer.bs",["bs_array","bs_js_dict","bs_caml_array","bs_caml_format","MessengerServerPayloadTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.viewer,d=a.is_page,e=[],f=[],g={},h=[],i={},j=[];b("bs_array").iter(function(a){__p&&__p();if(a==null)return 0;else{var k=b("MessengerServerPayloadTransformer.bs").getThreadFBID(a),l=b("MessengerServerPayloadTransformer.bs").getOtherUserID(a),m=b("MessengerServerPayloadTransformer.bs").transformThread(c,a,d);e.push(m);var n=b("MessengerServerPayloadTransformer.bs").transformMessages(c,a,d);n&&b("bs_array").iter(function(a){f.push(a);return 0},n[0]);n=b("MessengerServerPayloadTransformer.bs").getMessagePageInfo(a);n&&(n[0].has_previous_page||(k==null?l==null||j.push({type:"thread",fbid:l}):j.push({type:"thread",fbid:k})));n=b("MessengerServerPayloadTransformer.bs").transformReadReceipts(c,a);if(n){n=n[0];k==null||(g[k]=n);l==null||(g[l]=n)}k=b("MessengerServerPayloadTransformer.bs").transformDeliveryReceipts(a);if(k.length>=1){l=b("bs_caml_array").caml_array_get(k,0);if(m.is_canonical){n=m.other_user_fbid;n==null||h.push({other_user_fbid:n,thread_fbid:null,time:b("bs_caml_format").caml_float_of_string(l.timestamp_precise)})}else{k=m.thread_fbid;k==null||h.push({other_user_fbid:null,thread_fbid:k,time:b("bs_caml_format").caml_float_of_string(l.timestamp_precise)})}}n=b("MessengerServerPayloadTransformer.bs").transformParticipants(a);return b("bs_array").iter(function(a){i[a.fbid]=a;return 0},n)}},a.threads);return{threads:e,actions:f,roger:g,delivery_receipts:h,participants:b("bs_js_dict").values(i),end_of_history:j}}f.transform=a}),null);